<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
<title type="text">THAPSANG.NET</title>
<generator uri="https://github.com/mojombo/jekyll">Jekyll</generator>
<link rel="self" type="application/atom+xml" href="http://localhost:4000/feed.xml" />
<link rel="alternate" type="text/html" href="http://localhost:4000" />
<updated>2014-09-25T08:31:04+07:00</updated>
<id>http://localhost:4000/</id>
<author>
  <name>Ta Ly</name>
  <uri>http://localhost:4000/</uri>
  <email>taly2808@gmail.com</email>
</author>


<entry>
  <title type="html"><![CDATA[Kiểm tra kết nối database với CodeIgniter]]></title>
  <link>http://localhost:4000/codeigniter/kiem-tra-ket-noi-database-voi-codeigniter</link>
  <id>http://localhost:4000/codeigniter/kiem-tra-ket-noi-database-voi-codeigniter</id>
  <published>2014-09-23T00:00:00+07:00</published>
  <updated>2014-09-23T00:00:00+07:00</updated>
  <author>
    <name>Ta Ly</name>
    <uri>http://localhost:4000</uri>
    <email>taly2808@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;Tôi đang sử dụng CodeIgniter 2.2.0, Apache/2.4.9 (Unix), PHP/5.5.11, MySQL/5.0.1. Khi làm việc với database, tôi gặp phải thông báo lỗi sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;A Database Error Occurred

Unable to connect to your database server using the provided settings.

Filename: core/Loader.php

Line Number: 346&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Và đây là thông số cấu hình database trong &lt;strong&gt;/application/config/database.php&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;lineno&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;$db[&amp;#39;default&amp;#39;][&amp;#39;hostname&amp;#39;] = &amp;#39;localhost&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 2&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;$db[&amp;#39;default&amp;#39;][&amp;#39;username&amp;#39;] = &amp;#39;root&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 3&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;$db[&amp;#39;default&amp;#39;][&amp;#39;password&amp;#39;] = &amp;#39;mypasword&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 4&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;$db[&amp;#39;default&amp;#39;][&amp;#39;database&amp;#39;] = &amp;#39;db_codeigniter_test&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 5&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;$db[&amp;#39;default&amp;#39;][&amp;#39;dbdriver&amp;#39;] = &amp;#39;mysql&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 6&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;$db[&amp;#39;default&amp;#39;][&amp;#39;dbprefix&amp;#39;] = &amp;#39;&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 7&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;$db[&amp;#39;default&amp;#39;][&amp;#39;pconnect&amp;#39;] = TRUE;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 8&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;$db[&amp;#39;default&amp;#39;][&amp;#39;db_debug&amp;#39;] = TRUE;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 9&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;$db[&amp;#39;default&amp;#39;][&amp;#39;cache_on&amp;#39;] = FALSE;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;$db[&amp;#39;default&amp;#39;][&amp;#39;cachedir&amp;#39;] = &amp;#39;&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;$db[&amp;#39;default&amp;#39;][&amp;#39;char_set&amp;#39;] = &amp;#39;utf8&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;$db[&amp;#39;default&amp;#39;][&amp;#39;dbcollat&amp;#39;] = &amp;#39;utf8_general_ci&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;13&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;$db[&amp;#39;default&amp;#39;][&amp;#39;swap_pre&amp;#39;] = &amp;#39;&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;14&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;$db[&amp;#39;default&amp;#39;][&amp;#39;autoinit&amp;#39;] = TRUE;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;15&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;$db[&amp;#39;default&amp;#39;][&amp;#39;stricton&amp;#39;] = FALSE;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Để kiểm tra có kết nối được tới database hay không, ta cần thêm đoạn code sau phía dưới cùng của file &lt;strong&gt;/application/config/database.php&lt;/strong&gt; và xem kết quả:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;lineno&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;echo &amp;#39;&amp;lt;pre&amp;gt;&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 2&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;print_r($db[&amp;#39;default&amp;#39;]);&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 3&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;echo &amp;#39;&amp;lt;/pre&amp;gt;&amp;#39;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 4&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;echo &amp;#39;Connecting to database: &amp;#39; .$db[&amp;#39;default&amp;#39;][&amp;#39;database&amp;#39;];&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 5&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;  $dbh=mysql_connect(&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 6&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    $db[&amp;#39;default&amp;#39;][&amp;#39;hostname&amp;#39;],&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 7&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    $db[&amp;#39;default&amp;#39;][&amp;#39;username&amp;#39;],&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 8&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    $db[&amp;#39;default&amp;#39;][&amp;#39;password&amp;#39;])&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 9&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    or die(&amp;#39;Cannot connect to the database because: &amp;#39; . mysql_error());&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    mysql_select_db ($db[&amp;#39;default&amp;#39;][&amp;#39;database&amp;#39;]);&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;11&lt;/span&gt; 
&lt;span class=&quot;lineno&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    echo &amp;#39;&amp;lt;br /&amp;gt;   Connected OK:&amp;#39;  ;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;13&lt;/span&gt; &lt;span class=&quot;x&quot;&gt;    die( &amp;#39;file: &amp;#39; .__FILE__ . &amp;#39; Line: &amp;#39; .__LINE__);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Nếu bạn gặp cảnh báo &lt;strong&gt;The mysql extension is deprecated and will be removed in the future: use mysqli or PDO instead&lt;/strong&gt;, để loại bỏ thông báo này, bạn có thể thêm &lt;code&gt;error_reporting(E_ALL ^ E_DEPRECATED);&lt;/code&gt; vào đầu file &lt;strong&gt;/application/config/database.php&lt;/strong&gt; hoặc chỉnh sửa giá trị của &lt;strong&gt;error_reporting&lt;/strong&gt; trong file &lt;strong&gt;php.ini&lt;/strong&gt;.
Xem thêm tại &lt;a href=&quot;http://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli&quot;&gt;http://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Nếu bạn gặp thông báo lỗi: &lt;strong&gt;mysql_connect(): No such file or directory&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Server không kết nối được tới database bởi vì file socket chưa chính xác. File socket của bạn có thể nằm ở /var/mysql/mysql.sock hoặc /tmp/mysql.sock (nếu bạn cài lampp hoặc xampp, nó sẽ là /opt/lampp/var/mysql/mysql.sock), tuy nhiên có thể PHP tìm kiếm sai vị trí.
Để giải quyết lỗi này, ta làm như sau:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Xem thông tin phpinfo(): nếu bạn cài lampp hoặc xampp thì có thể xem thông tin phpinfo() bằng cách nhập vào trình duyệt địa chỉ: &lt;a href=&quot;http://localhost/xampp/phpinfo.php&quot;&gt;http://localhost/xampp/phpinfo.php&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Tìm kiếm &lt;strong&gt;mysql.default_socket&lt;/strong&gt; hoặc &lt;strong&gt;pdo_mysql.default_socket&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Mở tập tin &lt;strong&gt;my.ini&lt;/strong&gt; (nếu sử dụng xampp) hoặc &lt;strong&gt;my.cnf&lt;/strong&gt; (nếu sử dụng lampp) và tìm kiếm giá trị của socket, ví dụ 	&lt;strong&gt;socket = /opt/lampp/var/mysql/mysql.sock&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Mở tập tin &lt;strong&gt;php.ini&lt;/strong&gt; (bạn có thể xem địa chỉ chứa file php.ini trên trang thông tin phpinfo hoặc sử dụng lệnh &lt;em&gt;locate php.ini&lt;/em&gt;) và thay thế tất cả các địa chỉ không chính xác bằng địa chỉ chính xác từ MySQL.&lt;/li&gt;
  &lt;li&gt;Restart Apache.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Nguồn tham khảo: &lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/12584762/mysql-connect-no-such-file-or-directory&quot;&gt;http://stackoverflow.com/questions/12584762/mysql-connect-no-such-file-or-directory&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/4219970/warning-mysql-connect-2002-no-such-file-or-directory-trying-to-connect-vi&quot;&gt;http://stackoverflow.com/questions/4219970/warning-mysql-connect-2002-no-such-file-or-directory-trying-to-connect-vi&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/codeigniter/kiem-tra-ket-noi-database-voi-codeigniter&quot;&gt;Kiểm tra kết nối database với CodeIgniter&lt;/a&gt; was originally published by Ta Ly at &lt;a href=&quot;http://localhost:4000&quot;&gt;THAPSANG.NET&lt;/a&gt; on September 23, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Tạo view calendar trong Drupal 7]]></title>
  <link>http://localhost:4000/drupal/7/tao-view-calendar-trong-drupal7</link>
  <id>http://localhost:4000/drupal/7/tao-view-calendar-trong-drupal7</id>
  <published>2014-04-14T00:00:00+07:00</published>
  <updated>2014-04-14T00:00:00+07:00</updated>
  <author>
    <name>Ta Ly</name>
    <uri>http://localhost:4000</uri>
    <email>taly2808@gmail.com</email>
  </author>
  <content type="html">&lt;h2 id=&quot;tnh-hung&quot;&gt;Tình huống&lt;/h2&gt;

&lt;p&gt;Mới đây, tôi cần hiển thị lịch học của các khóa học dưới dạng lịch (calendar) để mọi người có cái nhìn trực quan hơn. Trang tôi muốn hiển thị là trang &lt;a href=&quot;http://buocnho.com/dao-tao&quot; target=&quot;_blank&quot;&gt;Đào tạo&lt;/a&gt;. Các khóa học có kiểu nội dung là &lt;strong&gt;Course&lt;/strong&gt; và có trường &lt;strong&gt;Dự kiến khai giảng&lt;/strong&gt; (&lt;code&gt;field_course_start_date&lt;/code&gt;) là kiểu ngày tháng (date). Đã có nhiều plugin jquery hỗ trợ việc hiển thị Calendar, nhưng làm thế nào để tôi có thể sử dụng chúng trong Drupal 7?&lt;/p&gt;

&lt;h2 id=&quot;gii-php&quot;&gt;Giải pháp&lt;/h2&gt;

&lt;p&gt;Để giải quyết vấn đề này, tôi sử dụng &lt;a href=&quot;http://drupal.org/project/views&quot; target=&quot;_blank&quot;&gt;Views&lt;/a&gt; dựa trên module &lt;a href=&quot;http://drupal.org/project/calendar&quot; target=&quot;_blank&quot;&gt;Calendar&lt;/a&gt;) của drupal để tạo ra một trang với những truy vấn phù hợp với mục đích hiển thị của tôi.&lt;/p&gt;

&lt;h2 id=&quot;thc-hin&quot;&gt;Thực hiện&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;Bạn cần cài đặt các modules sau: &lt;a href=&quot;https://drupal.org/project/ctools&quot; target=&quot;_blank&quot;&gt;CTools&lt;/a&gt;, &lt;a href=&quot;https://drupal.org/project/views&quot; target=&quot;_blank&quot;&gt;Views&lt;/a&gt;, &lt;a href=&quot;https://drupal.org/project/date&quot; target=&quot;_blank&quot;&gt;Date&lt;/a&gt;, &lt;a href=&quot;https://drupal.org/project/calendar&quot; target=&quot;_blank&quot;&gt;Calendar&lt;/a&gt;.
 &lt;em&gt;Lưu ý&lt;/em&gt;: khi cài đặt các module trên, bạn cần enable cả Date API và Date Views.&lt;/li&gt;
  &lt;li&gt;Tạo view từ template: bạn truy cập vào Structure &amp;gt; Views &amp;gt; Add view from template.
 &lt;img src=&quot;/assets/img/add-view-from-template.png&quot; alt=&quot;Tạo view từ template&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;Khi đó, bạn sẽ nhìn thấy nhiều loại Views mặc định mà bạn có thể thêm vào.
    &lt;ul&gt;
      &lt;li&gt;Click vào &lt;strong&gt;add&lt;/strong&gt; ở phía cuối hàng “&lt;em&gt;A calendar view of the ‘field_course_start_date’ field in the ‘node’ base table.&lt;/em&gt;”.
  &lt;img src=&quot;/assets/img/add-field-course-start-date.png&quot; alt=&quot;Tạo view từ template&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Nhập vào tên View mà bạn muốn hiển thị, sau đó click &lt;strong&gt;Continue&lt;/strong&gt;.
 &lt;img src=&quot;/assets/img/enter-view-name-calendar.png&quot; alt=&quot;Nhập vào tên View Calendar&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Bạn kéo xuống cuối trang để xem preview của view, bạn sẽ thấy view calendar với nội dung được hiển thị phía trong.
 &lt;img src=&quot;/assets/img/preview-calendar-view.png&quot; alt=&quot;Preview&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Kéo trở lên,  chúng ta cần thay đổi phần cấu hình &lt;strong&gt;FILTER CRITERIA&lt;/strong&gt; để view của chúng ta chỉ hiển thị nội dung có content type là &lt;strong&gt;Course&lt;/strong&gt;:
        &lt;ul&gt;
          &lt;li&gt;Click vào nút Add.
  &lt;img src=&quot;/assets/img/add-filter-criteria.png&quot; alt=&quot;Add Filter Criteria&quot; /&gt;&lt;/li&gt;
          &lt;li&gt;Chọn &lt;em&gt;Content: Type&lt;/em&gt;.&lt;/li&gt;
          &lt;li&gt;Click Apply (all displays).&lt;/li&gt;
          &lt;li&gt;Chọn “Is one of” và sau tích chọn “&lt;em&gt;Course&lt;/em&gt;”.
  &lt;img src=&quot;/assets/img/config-filter-criteria-type.png&quot; alt=&quot;Cấu hình cho Filter Criteria&quot; /&gt;&lt;/li&gt;
          &lt;li&gt;Click Apply (all displays).
 Khi đó, &lt;em&gt;Filter Criteria&lt;/em&gt; sẽ như hình.
 &lt;img src=&quot;/assets/img/filter-criteria-after.png&quot; alt=&quot;Filter Criteria&quot; /&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Tiếp đến, chúng ta chỉnh sửa &lt;strong&gt;Contextual Filters&lt;/strong&gt; trong phần &lt;strong&gt;Advanced&lt;/strong&gt; ở cột bên phải.
 &lt;img src=&quot;/assets/img/contextual-filters.png&quot; alt=&quot;Cấu hình Contextual Filters&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Click &lt;em&gt;Date: Date (node) (Content: Dự kiến khai giảng (field_course_start_date))&lt;/em&gt;.&lt;/li&gt;
      &lt;li&gt;Ở phía trên của cửa sổ, bạn cần đảm bảo rằng mình đang cấu hình cho lựa chọn tất cả các hiển thị (All displays).&lt;/li&gt;
      &lt;li&gt;Check chọn &lt;em&gt;Content: Dự kiến khai giảng (field_course_start_date)&lt;/em&gt; và click &lt;em&gt;Apply (all displays)&lt;/em&gt;.
 &lt;img src=&quot;/assets/img/config-contextual-filters.png&quot; alt=&quot;Contextual Filters&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Kiểm tra lại Preview của View.&lt;/li&gt;
      &lt;li&gt;Lưu lại  cấu hình của View.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Cấu hình đường dẫn của View để hiển thị ngoài trang web.
    &lt;ul&gt;
      &lt;li&gt;Đường dẫn mặc định của View được thể hiện trong phần cấu hình &lt;em&gt;Path&lt;/em&gt; của cột &lt;strong&gt;PAGE SETTINGS&lt;/strong&gt;. Bạn click vào đường dẫn đó để thay đổi tên đường dẫn mà bạn muốn. Sau đó lưu các thiết lập đó lại.
 &lt;img src=&quot;/assets/img/page-calendar-setting.png&quot; alt=&quot;Thiết lập đường dẫn cho trang hiển thị view calendar&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Nếu bạn thay đổi đường dẫn thì cũng nhớ thay đổi cho các hiển thị theo Week, Day, Year nữa.	&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Kiểm tra hiển thị ngoài trang web
 Giả sử, tôi thay đổi đường dẫn từ &lt;strong&gt;calendar-node-field-course-start-date&lt;/strong&gt; thành &lt;strong&gt;dao-tao&lt;/strong&gt;. Khi đó, trên thanh địa chỉ trình duyệt, tôi nhập vào như sau: &lt;em&gt;http://localhost/drupal/dao-tao&lt;/em&gt; và kiểm tra kết quả thôi.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;xem-thm&quot;&gt;Xem thêm&lt;/h2&gt;

&lt;p&gt;Nếu bạn gặp lỗi &lt;strong&gt;Warning: Illegal string offset ‘data’ in template_preprocess_calendar_month() (line 38 of modules/calendar/theme/theme.inc)&lt;/strong&gt; khi hiển thị nội dung của view calendar, bạn làm như sau:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Mở file &lt;strong&gt;sites/all/modules/calendar/theme/theme.inc&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Thêm đoạn code sau ngay dưới dòng 37: &lt;/p&gt;

    &lt;p&gt;if (!isset($data[‘data’])) {
      continue;
  }&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Lưu file, xóa cache và mở lại trang.&lt;/li&gt;
&lt;/ul&gt;


  &lt;p&gt;&lt;a href=&quot;http://localhost:4000/drupal/7/tao-view-calendar-trong-drupal7&quot;&gt;Tạo view calendar trong Drupal 7&lt;/a&gt; was originally published by Ta Ly at &lt;a href=&quot;http://localhost:4000&quot;&gt;THAPSANG.NET&lt;/a&gt; on April 14, 2014.&lt;/p&gt;</content>
</entry>

</feed>
