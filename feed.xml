<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
<title type="text">THAPSANG.NET</title>
<generator uri="https://github.com/mojombo/jekyll">Jekyll</generator>
<link rel="self" type="application/atom+xml" href="/feed.xml" />
<link rel="alternate" type="text/html" href="" />
<updated>2014-11-08T10:11:23+07:00</updated>
<id>/</id>
<author>
  <name>Ta Ly</name>
  <uri>/</uri>
  <email>taly2808@gmail.com</email>
</author>


<entry>
  <title type="html"><![CDATA[Routing ứng dụng SPA sử dụng UI Router module trong AngularJS]]></title>
  <link>/angularjs/routing-spa-with-angular-ui-router</link>
  <id>/angularjs/routing-spa-with-angular-ui-router</id>
  <published>2014-11-04T00:00:00+07:00</published>
  <updated>2014-11-04T00:00:00+07:00</updated>
  <author>
    <name>Ta Ly</name>
    <uri></uri>
    <email>taly2808@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;Phần không thể thiếu trong bất cứ một ứng dụng web nào đó là bộ định tuyến (URL router). Bộ cung cấp định tuyến chuẩn trong AngularJS là &lt;a href=&quot;https://docs.angularjs.org/api/ngRoute&quot;&gt;ngRoute&lt;/a&gt;. Chúng ta đã có bài tìm hiểu về cách &lt;a href=&quot;/angularjs/routing-single-page-application-voi-module-ngRoute-cua-angularjs&quot;&gt;routing trong ứng dụng SPA bằng module ngRoute&lt;/a&gt; trong bài trước. Trong bài này, chúng ta sẽ sử dụng module UI Router để làm việc đó.&lt;/p&gt;

&lt;section&gt;
  &lt;header&gt;
    &lt;h2&gt;Nội dung&lt;/h2&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#ui-router-l-g&quot;&gt;UI Router là gì?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#m-hnh-s-dng-in-hnh-ca-ui-router&quot;&gt;Mô hình sử dụng điển hình của UI Router&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#states-vs-routes&quot;&gt;States vs. Routes&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#demo&quot;&gt;Demo&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ti-liu-tham-kho&quot;&gt;Tài liệu tham khảo&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/section&gt;

&lt;h2 id=&quot;ui-router-l-g&quot;&gt;UI Router là gì?&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;AngularUI Router là một khung ứng dụng để định tuyến (routing framework) cho AngularJS, cho phép bạn tổ chức các phần của giao diện vào trong một trạng thái (state). &lt;em&gt;$route&lt;/em&gt; service trong module &lt;em&gt;ngRoute&lt;/em&gt; tổ chức các phần giao diện theo các routes URL. Không giống như &lt;em&gt;$route&lt;/em&gt; service, &lt;em&gt;UI Router&lt;/em&gt; tổ chức các phần theo các states. Với một state, bạn có thể có các routes tùy ý cũng như các hành vi khác kèm theo nó.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;m-hnh-s-dng-in-hnh-ca-ui-router&quot;&gt;Mô hình sử dụng điển hình của UI Router&lt;/h2&gt;

&lt;figure&gt;&lt;img src=&quot;https://docs.google.com/drawings/d/1yOhGbmhmanJjojRsNfQLdKL761QC1q_48MMgNd7m5gE/pub?w=784&amp;amp;h=318&quot; /&gt;&lt;/figure&gt;

&lt;figure&gt;&lt;img src=&quot;https://docs.google.com/drawings/d/1PHGzY7p7rHsjuiOe22yRTRO7QH50qnAbAoNyULPXA70/pub?w=961&amp;amp;h=494&quot; /&gt;&lt;/figure&gt;

&lt;h2 id=&quot;states-vs-routes&quot;&gt;States vs. Routes&lt;/h2&gt;

&lt;figure&gt;&lt;img src=&quot;https://docs.google.com/drawings/d/1O2HyStcbF1sPSwLGexJTDdYNnpJjc4_3NhegqMTWmC8/pub?w=1275&amp;amp;h=379&quot; /&gt;&lt;/figure&gt;

&lt;figure&gt;&lt;img src=&quot;https://docs.google.com/drawings/d/14fNRCHUiYPPOnUKYzmgHF08NtSUiJUM4QBAlMWi5mEw/pub?w=956&amp;amp;h=328&quot; /&gt;&lt;/figure&gt;

&lt;figure&gt;&lt;img src=&quot;https://docs.google.com/drawings/d/1OEaaG8lIY13ZrYANv4APUcSIrgxM5qDijtaiesSoO5Q/pub?w=960&amp;amp;h=489&quot; /&gt;&lt;/figure&gt;

&lt;h2 id=&quot;demo&quot;&gt;Demo&lt;/h2&gt;

&lt;p&gt;Trong demo này, chúng ta xây dựng 2 trang chính là &lt;em&gt;Home&lt;/em&gt; và &lt;em&gt;Contacts&lt;/em&gt;. Trên trang &lt;em&gt;Home&lt;/em&gt;, chúng ta sẽ thể hiện đặc tính &lt;a href=&quot;https://github.com/angular-ui/ui-router/wiki/Multiple-Named-Views&quot;&gt;Multiple Named views&lt;/a&gt; và trang Contacts sẽ thể hiện đặc tính &lt;a href=&quot;https://github.com/angular-ui/ui-router/wiki/Nested-States-%26-Nested-Views&quot;&gt;Nested views&lt;/a&gt; của UI Router.&lt;/p&gt;

&lt;iframe src=&quot;http://embed.plnkr.co/f9flitoAHm2nZOZM147f/&quot; style=&quot;border:0px #FFFFFF none;&quot; name=&quot;routing spa with ui-router&quot; scrolling=&quot;no&quot; frameborder=&quot;1&quot; marginheight=&quot;0px&quot; marginwidth=&quot;0px&quot; height=&quot;400px&quot; width=&quot;100%&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Trước hết, để sử dụng UI Router, chúng ta cần gọi đến module ui-router trong file &lt;code&gt;index.html&lt;/code&gt; và bơm truyền phụ thuộc cho ứng dụng:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;c1&quot;&gt;//index.html&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;angular-ui-router.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;/script&amp;gt;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//app.js&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;angular&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;uiRouterApp&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;ui.router&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Trong một file template, chúng ta có thể có một hoặc nhiều vị trí để đặt chỉ thị lệnh &lt;code&gt;ui-view&lt;/code&gt; và chúng ta có thể đặt tên hoặc không đặt tên cho các &lt;code&gt;ui-view&lt;/code&gt; này. Trong demo, chúng ta sử dụng 1 &lt;code&gt;ui-view&lt;/code&gt; directive trong file &lt;code&gt;index.html&lt;/code&gt; và 2 &lt;code&gt;ui-sref&lt;/code&gt; directive trong thẻ anchor để điều hướng đến state &lt;em&gt;home&lt;/em&gt; và &lt;em&gt;contacts&lt;/em&gt;.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;ui-sref=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;home&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Home&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;ui-sref=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;contacts&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Contact&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;ui-sref&lt;/code&gt; directive được sử dụng thay thế thuộc tính &lt;code&gt;href&lt;/code&gt; của thẻ anchor để tham chiếu đến state. Nếu url tồn tại, nó sẽ trả lại thuộc tính &lt;code&gt;href&lt;/code&gt; khi biên dịch. Ví dụ, khi biên dịch &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;ui-sref=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;home&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Home&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;sẽ được trả lại như sau: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;ui-sref=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;home&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;#/home&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Home&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Trong file &lt;code&gt;app.js&lt;/code&gt;, chúng ta sử dụng &lt;code&gt;$stateProvider&lt;/code&gt; và &lt;code&gt;$urlRouterProvider&lt;/code&gt; service để định nghĩa các states.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;$stateProvider&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;home&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/home&amp;#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;contacts&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/contacts&amp;#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Khi truy cập vào trang &lt;em&gt;Home&lt;/em&gt;, chúng ta có một phần nội dung chung và hai nội dung được bơm vào từ bên ngoài. Trong file template &lt;code&gt;partial-home.html&lt;/code&gt;, chúng ta thêm 2 view được đặt tên là &lt;code&gt;ui-view=&quot;viewA&quot;&lt;/code&gt; và &lt;code&gt;ui-view=&quot;viewB&quot;&lt;/code&gt; (xem chi tiết trong demo). Và với mỗi view, chúng ta sẽ hiển thị các nội dung khác nhau. Khi đó, trong file &lt;code&gt;app.js&lt;/code&gt;, chúng ta định nghĩa state &lt;em&gt;home&lt;/em&gt; với các views như sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;home&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/home&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;views&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;templateUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;partial-home.html&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;&amp;#39;viewA@home&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;home.viewA&amp;#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;&amp;#39;viewB@home&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
      &lt;span class=&quot;nx&quot;&gt;templateUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;partial-home-viewB.html&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;This is home.viewB!&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Ở đây, chúng ta sử dụng tên cố định (absolute name) cho view bằng cách khai báo &lt;code&gt;viewA@home&lt;/code&gt; và &lt;code&gt;viewB@home&lt;/code&gt; để xác định rằng các thiết lập cho hai views này sẽ chỉ ảnh hưởng trong state &lt;em&gt;home&lt;/em&gt;. Tài liệu của UI Router giải thích các khái niệm này rất tốt, bạn nên tham khảo nó &lt;a href=&quot;https://github.com/angular-ui/ui-router/wiki/Multiple-Named-Views#view-names---relative-vs-absolute-names&quot;&gt;tại đây&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Với trang &lt;em&gt;Contacts&lt;/em&gt;, chúng ta có hai link &lt;em&gt;Route 1&lt;/em&gt; và &lt;em&gt;Route 2&lt;/em&gt;, và chúng ta cũng hiển thị các view tương ứng. Trong trường hợp này, chúng ta sử dụng các view lồng nhau (nested views), và hai link này là các state con của state &lt;em&gt;contacts&lt;/em&gt;, do đó, trong khai báo của thẻ anchor trong file &lt;code&gt;partial-contacts.html&lt;/code&gt;, chúng ta sử dụng thêm dấu &lt;code&gt;.&lt;/code&gt; trong &lt;code&gt;ui-sref&lt;/code&gt; directive:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ui&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sref&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;.route1&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Route&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;/a&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ui&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sref&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;.route2&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Route&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;/a&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Và chúng ta khai báo state trong ứng dụng để hiển thị các view tương ứng như sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;contacts&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/contacts&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;templateUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;partial-contacts.html&amp;#39;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;contacts.route1&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/route1&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;Display content of contacts.route1&amp;#39;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;contacts.route2&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/route2&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;templateUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;partial-contacts-route2.html&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;ContactListCtrl&amp;#39;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Trên đây là tổng quan về UI Router trong Angular và cách sử dụng nó để routing trong ứng dụng. Chúng ta sẽ đi vào tìm hiểu chi tiết các đặc tính của module UI Router trong các bài tiếp theo.&lt;/p&gt;

&lt;h2 id=&quot;ti-liu-tham-kho&quot;&gt;Tài liệu tham khảo&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/angular-ui/ui-router/wiki&quot;&gt;The docs of Angular UI Router&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

  &lt;p&gt;&lt;a href=&quot;/angularjs/routing-spa-with-angular-ui-router&quot;&gt;Routing ứng dụng SPA sử dụng UI Router module trong AngularJS&lt;/a&gt; was originally published by Ta Ly at &lt;a href=&quot;&quot;&gt;THAPSANG.NET&lt;/a&gt; on November 04, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Promises/Deferred trong AngularJS]]></title>
  <link>/angularjs/promises-deferred-trong-angularjs</link>
  <id>/angularjs/promises-deferred-trong-angularjs</id>
  <published>2014-10-30T00:00:00+07:00</published>
  <updated>2014-10-30T00:00:00+07:00</updated>
  <author>
    <name>Ta Ly</name>
    <uri></uri>
    <email>taly2808@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;Promises là một tính năng chính (a core feature) của AngularJS. Có thể bạn chưa biết hoặc chưa hiểu về promise, nhưng nếu bạn làm việc với AngularJS thì gần như chắc chắn rằng bạn sẽ làm việc với promise. Trong bài viết này, chúng ta sẽ tìm hiểu vậy Promise là gì, chúng được sử dụng ở đâu? Cách thức nó làm việc như thế nào?&lt;/p&gt;

&lt;section&gt;
  &lt;header&gt;
    &lt;h2&gt;Nội dung&lt;/h2&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#promise-l-g&quot;&gt;Promise là gì?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#promise-lm-vic-nh-th-no&quot;&gt;Promise làm việc như thế nào?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#v-d-n-gin&quot;&gt;Ví dụ đơn giản&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#chaining-promise&quot;&gt;Chaining Promise&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#parallel-promises&quot;&gt;Parallel Promises&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ti-liu-tham-kho&quot;&gt;Tài liệu tham khảo&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/section&gt;

&lt;h2 id=&quot;promise-l-g&quot;&gt;Promise là gì?&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;Promise là một cơ chế cho phép bạn trì hoãn một hành động hoặc một chuỗi các hành động đã được nêu ra. Một promise đại diện cho kết quả sau cùng của một hành động. Chúng ta có thể sử dụng một promise để xác định phải làm gì khi hành động cho dù kết quả cuối cùng của promise là thành công hay thất bại. Và promise sử dụng để xử lý các sự kiện không đồng bộ.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;promise-lm-vic-nh-th-no&quot;&gt;Promise làm việc như thế nào?&lt;/h2&gt;

&lt;p&gt;Khái niệm dưới đây về Promise khá đơn giản, nó có 2 thành phần:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Deferred: đại diện cho &lt;strong&gt;một công việc&lt;/strong&gt; chưa được thực hiện, và&lt;/li&gt;
  &lt;li&gt;Promise: thể hiện cho &lt;strong&gt;kết quả&lt;/strong&gt; từ công việc đó (Deferred).&lt;/li&gt;
&lt;/ul&gt;

&lt;figure&gt;
	&lt;img src=&quot;https://docs.google.com/drawings/d/1112lp5doFi8EBtTZoJ3p7LESacWkReM7YsWQWWB0NrA/pub?w=830&amp;amp;h=631&quot; /&gt;
&lt;/figure&gt;
&lt;p&gt;&lt;small&gt;source: &lt;a href=&quot;http://blog.mediumequalsmessage.com/promise-deferred-objects-in-javascript-pt1-theory-and-semantics&quot;&gt;Promise &amp;amp; Deferred objects in JavaScript Pt.1: Theory and Semantics.&lt;/a&gt;&lt;/small&gt; &lt;/p&gt;

&lt;p&gt;Về cơ bản, chúng ta sử dụng &lt;strong&gt;Deferred&lt;/strong&gt; như là một đối tượng thông tin liên lạc để báo hiệu sự bắt đầu, tiến trình xử lý và hoàn thành công việc.&lt;/p&gt;

&lt;p&gt;Một &lt;strong&gt;Promise&lt;/strong&gt; lần lượt là một đối tượng đầu ra chứa kết quả từ &lt;strong&gt;Deferred&lt;/strong&gt;. Nó có một trạng thái (State) nhất định (đang chờ xử lý - pending, hoàn thành - fulfilled, bị từ chối - rejected) và bộ xử lý (Handlers) hoặc các hàm gọi lại (callback functions) sẽ được gọi một lần khi một promise được giải quyết, bị từ chối hoặc cập nhật tiến trình xử lý.&lt;/p&gt;

&lt;p&gt;Trong Angular, các promises được tạo ra bằng &lt;a href=&quot;https://docs.angularjs.org/api/ng/service/$q&quot;&gt;$q service&lt;/a&gt;. Lý do dịch vụ được đặt tên là $q là do việc thực hiện promises trong AngularJS dựa trên cơ chế promise của Kris Kowal có tên là thư viện &lt;strong&gt;Q&lt;/strong&gt;. Bạn có thể xem thêm thông tin về thư viện Q tại &lt;a href=&quot;https://github.com/kriskowal/q&quot;&gt;https://github.com/kriskowal/q&lt;/a&gt;. Promises cũng được trả lại từ vài dịch vụ khác nữa của AngularJS như &lt;a href=&quot;https://docs.angularjs.org/api/ng/service/$http&quot;&gt;$http&lt;/a&gt;, &lt;a href=&quot;https://docs.angularjs.org/api/ng/service/$timeout&quot;&gt;$timeout&lt;/a&gt;, &lt;a href=&quot;https://docs.angularjs.org/api/ngRoute/service/$route&quot;&gt;$route&lt;/a&gt;, &lt;a href=&quot;https://docs.angularjs.org/api/ngResource/service/$resource&quot;&gt;$resoure&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;$q thực thi tất cả các phương thức Deferred/Promise được mô tả ở trên, cộng thêm một số phương thức của của riêng nó: &lt;em&gt;$q.defer()&lt;/em&gt; - tạo mới một đối tượng Deferred , &lt;em&gt;$q.all()&lt;/em&gt; - cho phép bạn chờ nhiều promises để giải quyết, và phương thức &lt;em&gt;$q.when()&lt;/em&gt;, &lt;em&gt;$q.reject()&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;$q.defer()&lt;/strong&gt; trả lại một đối tượng Deferred, bao gồm các phương thức &lt;em&gt;resolve(), reject(), notify()&lt;/em&gt;. Deferred có một thuộc tính promise, thuộc tính này là một đối tượng promise có thể được truyền khắp ứng dụng.&lt;/p&gt;

&lt;p&gt;Đối tượng promise có 3 phương thức khác: &lt;em&gt;then(), catch(), finally()&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;em&gt;then(successCallback, errorCallback, notifyCallback)&lt;/em&gt;: lấy 3 callbacks làm tham số, một cho khi promise thành công, một cho khi promise thất bại, một cho thông báo của promise.&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;catch(errorCallback)&lt;/em&gt;: đây là cách viết tắt của phương thức &lt;code&gt;promise.then(null, errorCallback)&lt;/code&gt;, có thể được sử dụng để có một chức năng tập trung, được gọi khi bất kì promise trong chuỗi promise thất bại.&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;finally(callback)&lt;/em&gt;: phương thức này luôn luôn được gọi, bất kể promise thành công hay thất bại. Nó rất hữu ích để giải phóng tài nguyên hoặc dọn dẹp một số thứ không cần thiết (giống như đóng kết nối tới database, shutting server down). Xem bản mô tả &lt;a href=&quot;https://github.com/kriskowal/q/wiki/API-Reference#promisefinallycallback&quot;&gt;chi tiết kỹ thuật đầy đủ&lt;/a&gt; để có thêm thông tin.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;v-d-n-gin&quot;&gt;Ví dụ đơn giản&lt;/h2&gt;

&lt;p&gt;Trong ví dụ này, chúng ta sẽ tạo ra một dịch vụ để lấy tên người dùng. Trong service, chúng ta thiết lập rằng lần đầu tiên chúng ta lấy tên từ server, các lần sau chúng ta sẽ trả lại từ bộ nhớ cache. Điều này có nghĩa là chúng ta phải xử lý với trường hợp không đồng bộ (lấy dữ liệu từ server) và trường hợp đồng bộ thông thường (lấy dữ liệu từ cache).&lt;/p&gt;

&lt;p&gt;Đầu tiên, chúng ta tạo ra một service, nó có một trường &lt;em&gt;name&lt;/em&gt;, giá trị ban đầu là null.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;NameService&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$http&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;//  Create a class that represents our name service.&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;NameService&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//  Initially the name is unknown....&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Bây giờ, trong hàm &lt;code&gt;getName()&lt;/code&gt;, chúng ta tạo một đối tượng &lt;code&gt;deferred&lt;/code&gt; sử dụng $q service. Đối tượng này chứa promise mà chúng ta sẽ trả về.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// Create a deferred operation.&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;deferred&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;defer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Nếu chúng ta đã có &lt;code&gt;name&lt;/code&gt;, chúng ta có thể &lt;code&gt;resolve&lt;/code&gt; đối tượng deferred ngay lập tức:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;deferred&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot; (from Cache!)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Tiếp đó, chúng ta sẽ xử lý trường hợp khi chưa có &lt;code&gt;name&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//  Get the name from the server.&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$http&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/api/my/name/&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
     &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;nx&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
       &lt;span class=&quot;nx&quot;&gt;deferred&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot; (from Server!)&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
     &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
     &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;nx&quot;&gt;deferred&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
     &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Ở đây, chúng ta sử dụng &lt;code&gt;$http&lt;/code&gt; service, và &lt;code&gt;success&lt;/code&gt;, &lt;code&gt;error&lt;/code&gt; là 2 function đặc biệt được thêm vào promise do &lt;code&gt;$http&lt;/code&gt; cung cấp - thông thường chúng ta sử dụng hàm &lt;code&gt;then&lt;/code&gt; với promise.&lt;/p&gt;

&lt;p&gt;Do đó, nếu chúng ta nhận được dữ liệu từ server, chúng ta có thể &lt;code&gt;resolve&lt;/code&gt; promise với giá trị trả về. Ngược lại, nếu request bị lỗi, chúng ta sẽ &lt;code&gt;reject&lt;/code&gt; promise.&lt;/p&gt;

&lt;p&gt;Cuối cùng, chúng ta trả lại promise mà chúng ta đã khởi tạo với &lt;code&gt;deferred&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;deferred&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Demo với JSFiddle:&lt;/p&gt;

&lt;iframe width=&quot;100%&quot; height=&quot;300&quot; src=&quot;http://jsfiddle.net/taly2808/f5826s0k/2/embedded/js,html,result&quot; allowfullscreen=&quot;allowfullscreen&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Chúng ta sẽ sử dụng dịch vụ này trong controller như sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;MainController&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;NameService&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;//  We have a name on the code, but it&amp;#39;s initially empty...&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;//  We have a function on the scope that can update the name.&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;updateName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;NameService&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;cm&quot;&gt;/* success function */&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
      &lt;span class=&quot;cm&quot;&gt;/* error function */&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;Failed to get the name, result is &amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
      &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Trong đoạn mã trên, chúng ta thấy có chút khác biệt, đó là sự xuất hiện của phương thức &lt;code&gt;then&lt;/code&gt; với tham số thứ nhất là successCallback và tham số thứ hai là errorCallback. Chúng ta cần nhớ rằng: &lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;AngularJS thêm các hàm &lt;code&gt;success&lt;/code&gt;, &lt;code&gt;error&lt;/code&gt; vào promise khi sử dụng &lt;code&gt;$http&lt;/code&gt; service và &lt;code&gt;$resource&lt;/code&gt; service. Chúng không phải là chuẩn và chúng ta sẽ không tìm thấy chúng trong các promise khác.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;chaining-promise&quot;&gt;Chaining Promise&lt;/h2&gt;

&lt;p&gt;Phương thức &lt;code&gt;then&lt;/code&gt; trả lại một promise. Điều tuyệt vời của Promise API đó là chúng ta có thể đính kèm nhiều bộ xử lý (then()) cho một promise. Nói cách khác, chúng ta có thể xâu chuỗi các promise thành một khối logic ngắn gọn được thực thi tại các thời điểm thích hợp mà không cần sử dụng lồng nhau.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;promise&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;doSomething&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;doSomethingElse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;doSomethingMore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;logError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Ví dụ, chúng ta cần lấy ra tên của user từ phía backend, nhưng chúng ta phải sử dụng các request độc lập để lấy ra thông tin của user và sau đó lấy ra quyền hạn truy cập trên ứng dụng của user:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;details&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;  
   &lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;nx&quot;&gt;profile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;nx&quot;&gt;permissions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;$http&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/api/user/name&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;c1&quot;&gt;// Store the username, get the profile.&lt;/span&gt;
     &lt;span class=&quot;nx&quot;&gt;details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$http&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/api/profile/&amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;//  Store the profile, now get the permissions.&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;profile&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$http&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/api/security/&amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;//  Store the permissions&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;permissions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;The full user details are: &amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;details&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;An error occured: &amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Như vậy, chúng ta có một chuỗi các lời gọi không đồng bộ được phối hợp với nhau mà không cần sử dụng các callbacks lồng nhau.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;Chuỗi các promises (promise chains) sẽ gọi hàm &lt;code&gt;then&lt;/code&gt; tiếp theo trong chuỗi với giá trị được trả lại của hàm &lt;code&gt;then&lt;/code&gt; trước đó (hoặc &lt;em&gt;undefined&lt;/em&gt; nếu không có giá trị trả về).&lt;/li&gt;
    &lt;li&gt;Nếu một hàm &lt;code&gt;then&lt;/code&gt; trả lại một promise thì hàm &lt;code&gt;then&lt;/code&gt; tiếp theo sẽ chỉ thực thi khi promise đó được giải quyết (resolve).&lt;/li&gt;
    &lt;li&gt;Hàm &lt;code&gt;catch&lt;/code&gt; được đặt ở cuối chuỗi sẽ cung cấp một điểm xử lý lỗi duy nhất cho toàn bộ chuỗi.&lt;/li&gt;
    &lt;li&gt;Hàm &lt;code&gt;finally&lt;/code&gt; ở cuối chuỗi sẽ luôn được thực hiện cho dù promise được giải quyết (resolve) hoặc bị từ chối (reject), để phục vụ mục đích dọn dẹp các promises.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;parallel-promises&quot;&gt;Parallel Promises&lt;/h2&gt;

&lt;p&gt;Một phương thức chúng ta đề cập tiếp theo đây đó là &lt;code&gt;$q.all()&lt;/code&gt;, nó được sử dụng để tạo ra một promise từ một tập các promises. Và promise duy nhất này được giải quyết (resolve) khi tất cả các promises bên trong nó được giải quyết. Trong Angular, phương thức này có thể được gọi bằng 2 cách: với một mảng (Array) hoặc một đối tượng (Object).&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Array: &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;$q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;promiseOne&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;promiseTwo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;promiseThree&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Object:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;$q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;promiseOne&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;second&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;promiseTwo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;third&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;promiseThree&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;second&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;third&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Bạn có thể tham khảo demo dưới đây. Trong demo này, mặc dù các promise được resolve theo thứ tự three, one, two nhưng khi chúng ta sử dụng &lt;code&gt;$q.all()&lt;/code&gt; thì kết quả trả lại sẽ theo thứ tự của các promise trong hàm &lt;em&gt;all()&lt;/em&gt; (click vào tab &lt;em&gt;Result&lt;/em&gt; để xem kết quả):&lt;/p&gt;

&lt;iframe width=&quot;100%&quot; height=&quot;300&quot; src=&quot;http://jsfiddle.net/taly2808/1jnyh630/embedded/js,html,result&quot; allowfullscreen=&quot;allowfullscreen&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Thêm một phương thức nữa đó là &lt;code&gt;$q.when()&lt;/code&gt; - hàm này hữu ích khi chúng ta đang sử dụng một function mà kết quả trả về có thể là một promise nhưng cũng có thể trả về một giá trị (lúc này chúng ta không cần phải trì hoãn - defer). Chúng ta có thể xem ví dụ dưới đây (bạn click vào tab &lt;em&gt;Result&lt;/em&gt; để xem kết quả khi chạy: ban đầu sẽ hiển thị &lt;em&gt;Ready.&lt;/em&gt; , 1 giây sau hiển thị &lt;em&gt;noPromise&lt;/em&gt;, 3 giây sau hiển thị &lt;em&gt;promise&lt;/em&gt;  )&lt;/p&gt;

&lt;iframe width=&quot;100%&quot; height=&quot;300&quot; src=&quot;http://jsfiddle.net/taly2808/4q2g3vy7/embedded/js,html,result&quot; allowfullscreen=&quot;allowfullscreen&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;

&lt;h2 id=&quot;ti-liu-tham-kho&quot;&gt;Tài liệu tham khảo&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.toptal.com/javascript/javascript-promises&quot;&gt;JavaScript Promises&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.xebia.com/2014/02/23/promises-and-design-patterns-in-angularjs/&quot;&gt;Promises And Design Patterns In AngularJS&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://documentup.com/kriskowal/q&quot;&gt;Document about Q&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.mediumequalsmessage.com/promise-deferred-objects-in-javascript-pt1-theory-and-semantics&quot;&gt;Promise &amp;amp; Deferred objects in JavaScript Pt.1: Theory and Semantics.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.dwmkerr.com/promises-in-angularjs-the-definitive-guide/&quot;&gt;AngularJS Promises - The Definitive Guide&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

  &lt;p&gt;&lt;a href=&quot;/angularjs/promises-deferred-trong-angularjs&quot;&gt;Promises/Deferred trong AngularJS&lt;/a&gt; was originally published by Ta Ly at &lt;a href=&quot;&quot;&gt;THAPSANG.NET&lt;/a&gt; on October 30, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Hiểu về 'Resolve' trong AngularJS routes]]></title>
  <link>/angularjs/resolve-trong-angularjs-routes</link>
  <id>/angularjs/resolve-trong-angularjs-routes</id>
  <published>2014-10-28T00:00:00+07:00</published>
  <updated>2014-10-28T00:00:00+07:00</updated>
  <author>
    <name>Ta Ly</name>
    <uri></uri>
    <email>taly2808@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;Trong bài &lt;a href=&quot;/angularjs/tim-hieu-module-ngRoute-trong-angularjs&quot;&gt;Tìm hiểu module ngRoute trong AngularJS&lt;/a&gt;, chúng ta đã tìm hiểu cách làm thế nào để định tuyến (routing) và cách các routes nói chuyện với controller như thế nào. Việc khởi tạo các controller có thể khác nhau dựa trên các thiết lập của route và các sự kiện &lt;code&gt;$routeChangeSuccess&lt;/code&gt; và &lt;code&gt;$routeChangeError&lt;/code&gt; tương ứng. Hầu hết các sự kiện này có do thuộc tính &lt;code&gt;resolve&lt;/code&gt; khi cấu hình route. Trong bài này, chúng ta sẽ làm sáng rõ vấn đề Tại sao lại cần &lt;code&gt;resolve&lt;/code&gt; và cách thức hoạt động của nó như thế nào.&lt;/p&gt;

&lt;p&gt;Tôi tìm được một bài viết của &lt;a href=&quot;http://www.twitter.com/shidhincr&quot;&gt;Shidhin&lt;/a&gt; giải thích khá rõ ràng và dễ hiểu về thuộc tính &lt;a href=&quot;http://www.undefinednull.com/2014/02/17/resolve-in-angularjs-routes-explained-as-story/&quot;&gt;‘Resolve’ trong AngularJS routes&lt;/a&gt; thông qua ba phiên bản của một câu chuyện. Do đó, tôi sẽ dịch lại bài viết đó và giữ nguyên câu chuyện của tác giả để lưu lại kiến thức cho bản thân và chia sẻ bài viết bổ ích này tới các bạn quan tâm.&lt;/p&gt;

&lt;section&gt;
  &lt;header&gt;
    &lt;h2&gt;Nội dung&lt;/h2&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#cu-chuyn&quot;&gt;Câu chuyện&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#phin-bn-2-ca-cu-chuyn&quot;&gt;Phiên bản 2 của câu chuyện&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#phin-bn-3-ca-cu-chuyn&quot;&gt;Phiên bản 3 của câu chuyện&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ti-liu-tham-kho&quot;&gt;Tài liệu tham khảo&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/section&gt;

&lt;h2 id=&quot;cu-chuyn&quot;&gt;Câu chuyện&lt;/h2&gt;

&lt;p&gt;Vào một ngày đẹp trời, tôi đã lên kế hoạch du lịch Thụy Sĩ. Vì vậy tôi gọi điện cho điều hành tour. Anh ta giải thích cho tôi về hành trình và thông tin khách sạn rất chi tiết và rõ ràng, vì vậy tôi đã đề nghị anh ta chuẩn bị các thứ cần thiết. Sau đó, điều hành tour có trách nhiệm đặt phòng và thực hiện các yêu cầu cần thiết cho chuyến du lịch của tôi. Sau cùng, tôi đã có một chuyến du lịch đến Thụy Sĩ.&lt;/p&gt;

&lt;p&gt;Bây giờ, chúng ta chuyển câu chuyện này sang ngữ cảnh của AngularJS. Chúng ta có:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code&gt;visitplace&lt;/code&gt; là route đầu tiên của chúng ta.&lt;/li&gt;
  &lt;li&gt;Địa điểm, các khu vực lân cận, phòng khách sạn là các nội dung trong template. Chúng ta sẽ thêm chúng vào trong file &lt;code&gt;placetovisit.html&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;Điều hành tour là người kết nối tới địa điểm, do đó chúng ta có một controller tên là &lt;code&gt;TourCoordinatorCtrl&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Nội dung của file &lt;code&gt;app.js&lt;/code&gt; như sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angular&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;app&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ngRoute&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/visitplace&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;templateUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;placetovisit.html&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;TourCoordinatorCtrl&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;accommodation&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;hotelName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Some Hotel&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;roomNo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;203&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;TourCoordinatorCtrl&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;accommodation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Shidhin&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;place&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Switzerland&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hotel&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;accommodation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hotelName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;roomno&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;accommodation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;roomNo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Template &lt;code&gt;placetovisit.html&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;Trip details&lt;span class=&quot;nt&quot;&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;h2&amp;gt;&lt;/span&gt;Hi, {{name}}. Welcome to {{place}}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;div&amp;gt;&lt;/span&gt;The accomodation is arranged on &lt;span class=&quot;nt&quot;&gt;&amp;lt;strong&amp;gt;&lt;/span&gt;{{hotel}}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/strong&amp;gt;&lt;/span&gt; and room number is &lt;span class=&quot;nt&quot;&gt;&amp;lt;strong&amp;gt;&lt;/span&gt;{{roomno}}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/strong&amp;gt;&amp;lt;/div&amp;gt;&lt;/span&gt;    
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Và file &lt;code&gt;index.html&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;lang=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;en&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;ng-app=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;app&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;

  &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;charset=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;UTF-8&amp;quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;AngularJS Resolve routes example&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;https://code.angularjs.org/1.2.25/angular.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;https://code.angularjs.org/1.2.25/angular-route.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;app.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;

  &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;#/visitplace&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;I want to go for a trip&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;ng-view&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;iframe src=&quot;http://embed.plnkr.co/Wc1bDmZluHBxztDWMEPM/preview&quot; style=&quot;border:0px #FFFFFF none;&quot; name=&quot;&#39;Resolve&#39; in AngularJs routes v1&quot; scrolling=&quot;no&quot; frameborder=&quot;1&quot; marginheight=&quot;0px&quot; marginwidth=&quot;0px&quot; height=&quot;250px&quot; width=&quot;100%&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Mọi thứ diễn ra như mong đợi khi chúng ta đìều hướng đến route &lt;code&gt;/visitplace&lt;/code&gt;. Ở đây, chúng ta thấy rằng &lt;code&gt;TourCoordinatorCtrl&lt;/code&gt; phụ thuộc vào &lt;code&gt;accommodation&lt;/code&gt; service. Controller chỉ chịu trách nhiệm tìm chi tiết khách sạn và phòng. Ngoài ra, việc lấy chi tiết về khách sạn và phòng là các sự kiện hoàn toàn đồng bộ. Điều đó có nghĩa là căn phòng sẽ được bố trí trước khi tôi tới nơi.&lt;/p&gt;

&lt;p&gt;Nhưng điều gì sẽ xảy ra nếu các sự kiện là không đồng bộ? Hãy nghĩ theo hướng này: Điều gì xảy ra nếu điều hành tour không chuyên nghiệp và anh ta đã quên đặt phòng và khách sạn? Do đó, khi tôi tới nơi tôi sẽ phải chờ cho tới khi tôi lấy được một phòng mới. Tương tự như vậy, trong code, chúng ta có thể thấy rằng view sẽ được trả lại (render) nhưng phương thức &lt;code&gt;getHotel()&lt;/code&gt; và &lt;code&gt;getRoom()&lt;/code&gt; sẽ lấy thêm thời gian để có được thông tin chi tiết phòng.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angular&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;app&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ngRoute&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/visitplace&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;templateUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;placetovisit.html&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;TourCoordinatorCtrl&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;accommodation&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$timeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;hotelName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;$timeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hotel&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Some hotel&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;---&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;roomNo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;$timeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;roomno&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;103&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;---&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;TourCoordinatorCtrl&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;accommodation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Shidhin&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;place&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Switzerland&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hotel&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;accommodation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hotelName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;roomno&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;accommodation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;roomNo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Đây không phải là một ý tưởng tốt. Chúng ta phải trả lại view và đợi dữ liệu được nạp lên đó. Trong trường hợp của tôi, nó giống như việc tôi đã bắt đầu chuyến đi và đã đến nơi, nhưng tôi đang phải chờ đợi ở đó để có được nơi ăn nghỉ của mình. Điều này thực sự gây khó chịu và phiền nhiễu. Liệu có cách nào có thể đảm bảo rằng các phụ thuộc kia được giải quyết trước khi tôi bắt đầu chuyến đi của mình? Hãy xem:&lt;/p&gt;

&lt;h2 id=&quot;phin-bn-2-ca-cu-chuyn&quot;&gt;Phiên bản 2 của câu chuyện&lt;/h2&gt;

&lt;p&gt;Tôi có một người bạn, cậu ta là chủ một khách sạn tại Thụy Sĩ. Cậu ta là bạn rất thân của tôi, vì vậy tôi có thể đề nghị cậu ta để cho tôi một phòng bất cứ lúc nào. Nếu tôi làm như vậy thì tôi không còn phải phụ thuộc vào nơi ở do điều hành tour cung cấp nữa. Cuối cùng, tất cả những gì tôi phải làm là đảm bảo chắc chắn rằng bản thân tôi giải quyết được vấn đề chỗ ở và thông báo với điều hành tour thu xếp các vấn đề còn lại.&lt;/p&gt;

&lt;p&gt;Đây chính xác là những gì chúng ta cần nếu bản thân các routes cần giải quyết các phụ thuộc trong ứng dụng. Với vấn đề này, Angular cung cấp một thuộc tính &lt;code&gt;resolve&lt;/code&gt; trong cấu hình của dịch vụ &lt;code&gt;$routeProvider&lt;/code&gt;. Thuộc tính resolve là một đối tượng sơ đồ tùy chọn (an optional map object) hoặc một mảng tên các dịch vụ hiện có (array of existing service names). Tất cả các keys của map object có thể được bơm truyền vào controller như một phụ thuộc. Key là một chuỗi (string) đơn giản, và giá trị của nó có thể là một function hoặc một string. Nếu giá trị là string thì Angular sẽ xem đó là một dịch vụ hiện có (existing service) và bơm truyền vào controller. Nếu giá trị là một function thì nó sẽ hoạt động như một factory function và giá trị trả về sẽ được bơm truyền vào controller.&lt;/p&gt;

&lt;p&gt;Hãy liên hệ câu chuyện hiện tại với ngữ cảnh của Angular bằng cách sử dụng đối tượng &lt;code&gt;resolve&lt;/code&gt;. Hãy xem những thay đổi trong code của ứng dụng, file &lt;code&gt;app.js&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angular&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;app&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ngRoute&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/visitplace&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;templateUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;placetovisit.html&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;TourCoordinatorCtrl&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&amp;quot;myFriendsHotel&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;hotelName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;My Friend&amp;#39;s hotel&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;roomNo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;TourCoordinatorCtrl&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;myFriendsHotel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Shidhin&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;place&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Switzerland&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hotel&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;myFriendsHotel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hotelName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;roomno&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;myFriendsHotel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;roomNo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Lưu ý: Khi controller đã được định nghĩa trong route, không bao giờ khởi tạo lại nó thông qua ng-controller directive, điều đó có thể đưa ra lỗi khi sử dụng với thuộc tính resolve.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Bằng cách này, chúng ta có thể chắc chắn rằng việc khởi tạo controller sẽ bị trì hoãn cho đến khi khách sạn đã sẵn sàng. View sẽ chỉ được trả lại khi controller đã được khởi tạo và sự kiện &lt;code&gt;$routeChangeSuccess&lt;/code&gt; sẽ được kích hoạt. Cũng cần chú ý rằng, việc tìm khách sạn ở đây là một hành động đồng bộ; có nghĩa là khi bạn tôi là chủ khách sạn, tôi có phòng ngay lập tức. Trong các ứng dụng thực tế, hầu hết chúng ta phải đối phó với các hành động không đồng bộ. Nào, hãy chuyển đến phiên bản thứ 3 của câu chuyện.&lt;/p&gt;

&lt;h2 id=&quot;phin-bn-3-ca-cu-chuyn&quot;&gt;Phiên bản 3 của câu chuyện&lt;/h2&gt;

&lt;p&gt;Trong phiên bản trước, bạn của tôi là chủ khách sạn. Nhưng trong phiên bản này, sẽ không có chủ khách sạn nào cả. Lần này, tôi có một người bạn khác ở Thụy Sĩ, cô ấy biết một vài chủ khách sạn và có thể tìm phòng cho tôi với giá rẻ hơn. Khi tôi gọi điện cho cô ấy và nói yêu cầu của mình, cô ấy sẽ mất một thời gian để nói chuyện với bạn của cô ấy và thu xếp cho tôi một phòng. Và thời gian đó không thể đoán trước được bởi vì bạn tôi sẽ yêu cầu bạn bè của cô ấy, bạn cô ấy có thể nói chuyện với bạn của họ và cứ như thế. Nhưng khi tôi gọi cho cô ấy lần đầu tiên, cô ấy hứa với tôi rằng cô ấy chắc chắn sẽ cập nhật kết quả, do đó tôi có thể thu xếp phần còn lại. Vì vậy, chỉ khi tôi nhận được thông tin cập nhật từ cô ấy, tôi mới gọi cho điều hành tour và đề nghị anh ta thu xếp các phần còn lại.&lt;/p&gt;

&lt;p&gt;Hãy xem những thay đổi trong file &lt;code&gt;app.js&lt;/code&gt; ở phiên bản cuối này:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angular&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;app&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;ngRoute&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;/visitplace&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;templateUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;placetovisit.html&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;TourCoordinatorCtrl&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&amp;quot;accommodation&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$timeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;myFriend&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;defer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;$timeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;myFriend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;hotelName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
              &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;My Friend&amp;#39;s friend&amp;#39;s hotel&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;roomNo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
              &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;404&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;myFriend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;TourCoordinatorCtrl&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;accommodation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Shidhin&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;place&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Switzerland&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hotel&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;accommodation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hotelName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;roomno&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;accommodation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;roomNo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Trong đoạn code trên, các bạn thấy rằng chúng ta đã định nghĩa một biến &lt;code&gt;myFriend&lt;/code&gt; bên trong hàm resolve và khởi tạo nó bằng cách sử dụng hàm &lt;code&gt;$q.defer()&lt;/code&gt; là bộ thực thi Promises API trong AngularJS, được lấy cảm hứng từ &lt;a href=&quot;https://github.com/kriskowal/q&quot;&gt;thư viện “Q”&lt;/a&gt; được kriskowal thực hiện. Nếu bạn không biết &lt;em&gt;Promises&lt;/em&gt; là gì, bạn nên tìm hiểu về nó &lt;a href=&quot;http://12devs.co.uk/articles/promises-an-alternative-way-to-approach-asynchronous-javascript/&quot;&gt;tại đây&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Những gì xảy ra ở đây là: function resolve đã tạo ra biến &lt;code&gt;myFriend&lt;/code&gt; và ngay lập tức nó trả lại &lt;code&gt;myFriend.promise&lt;/code&gt;. Điều này có nghĩa, chúng ta biết rằng điều gì sẽ xảy ra sau đó và &lt;code&gt;myFriend&lt;/code&gt; sẽ cập nhật kết quả của hành động để trả lại lời hứa. Hành động có thể thành công hoặc thất bại. Nếu hành động thành công, lời hứa sẽ được giải quyết (resolved) với các thông tin về phòng khách sạn; nếu hành động thất bại, lời hứa sẽ bị từ chối (reject) với dữ liệu trả lại (thường là các thông báo lỗi).&lt;/p&gt;

&lt;p&gt;Khi factory function trả lại một lời hứa (promise), việc khởi tạo controller sẽ bị trì hoãn cho đến khi lời hứa được giải quyết hoặc từ chối (resolved/rejected). Khi promise được giải quyết, controller sẽ được khởi tạo và dữ liệu được trả lại sẽ được bơm vào trong controller. Trong trường hợp của chúng ta thì đó là đối tượng &lt;code&gt;accommodation&lt;/code&gt;; sau đó sự kiện &lt;code&gt;$routeChangeSuccess&lt;/code&gt; sẽ được kích hoạt. Cũng có khả năng là promise đầu tiên trả lại một promise khác. Trong trường hợp đó, việc khởi tạo controller của chúng ta sẽ bị trì hoãn cho đến khi tất cả các promises được giải quyết. Tại bất kỳ thời điểm nào, nếu một promise bị từ chối, controller sẽ không được khởi tạo, thay vào đó là sự kiện &lt;code&gt;$routeChangeError&lt;/code&gt; sẽ được kích hoạt.&lt;/p&gt;

&lt;p&gt;Trong kết quả demo dưới đây, chúng ta sẽ thấy view được trả lại sau 5 giây kể từ khi click vào link “I want to go for a trip”:&lt;/p&gt;

&lt;iframe src=&quot;http://embed.plnkr.co/uSxECGavg6YchGkPV9tf/preview&quot; style=&quot;border:0px #FFFFFF none;&quot; name=&quot;&#39;Resolve&#39; in AngularJs routes v3&quot; scrolling=&quot;no&quot; frameborder=&quot;1&quot; marginheight=&quot;0px&quot; marginwidth=&quot;0px&quot; height=&quot;250px&quot; width=&quot;100%&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Thuộc tính &lt;code&gt;resolve&lt;/code&gt; khá hữu ích khi chúng ta cần có một vài dữ liệu sẵn sàng trước khi khởi tạo controller và render view. Trong các ứng dụng thực tế, &lt;code&gt;$timeout&lt;/code&gt; thường được thay thế bằng &lt;code&gt;$http&lt;/code&gt; để tải dữ liệu từ server. Vì nó là sự kiện không đồng bộ, nên chúng ta có thể đảm bảo rằng view sẽ được trả lại với dữ liệu phù hợp.&lt;/p&gt;

&lt;h2 id=&quot;ti-liu-tham-kho&quot;&gt;Tài liệu tham khảo&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.undefinednull.com/2014/02/17/resolve-in-angularjs-routes-explained-as-story/&quot;&gt;‘Resolve’ in AngularJS Routes, Explained as Story&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://documentup.com/kriskowal/q&quot;&gt;Document about Q&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

  &lt;p&gt;&lt;a href=&quot;/angularjs/resolve-trong-angularjs-routes&quot;&gt;Hiểu về 'Resolve' trong AngularJS routes&lt;/a&gt; was originally published by Ta Ly at &lt;a href=&quot;&quot;&gt;THAPSANG.NET&lt;/a&gt; on October 28, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Tìm hiểu module ngRoute trong AngularJS]]></title>
  <link>/angularjs/tim-hieu-module-ngRoute-trong-angularjs</link>
  <id>/angularjs/tim-hieu-module-ngRoute-trong-angularjs</id>
  <published>2014-10-23T00:00:00+07:00</published>
  <updated>2014-10-23T00:00:00+07:00</updated>
  <author>
    <name>Ta Ly</name>
    <uri></uri>
    <email>taly2808@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;&lt;a href=&quot;https://docs.angularjs.org/api/ngRoute&quot;&gt;ngRoute&lt;/a&gt; là một module trong AngularJS cung cấp dịch vụ định tuyến (routing), &lt;a href=&quot;http://en.wikipedia.org/wiki/Deep_linking&quot;&gt;deep linking&lt;/a&gt; và các chỉ thị lệnh (directives) &lt;code&gt;ngView&lt;/code&gt; cho các ứng dụng angular. Trong &lt;a href=&quot;/angularjs/routing-single-page-application-voi-module-ngRoute-cua-angularjs&quot;&gt;bài trước&lt;/a&gt;, chúng ta đã có một ví dụ đơn giản về routing trong SPA với AngularJS. Trong nội dung bài này, chúng ta sẽ đi vào tìm hiểu chi tiết về các thành phần &lt;strong&gt;provider&lt;/strong&gt;, &lt;strong&gt;services&lt;/strong&gt; và &lt;strong&gt;ngView directive&lt;/strong&gt; trong module ngRoute.&lt;/p&gt;

&lt;section&gt;
  &lt;header&gt;
    &lt;h2&gt;Nội dung&lt;/h2&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#cch-thc-s-dng&quot;&gt;Cách thức sử dụng&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ngview-directive&quot;&gt;ngView directive&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#routeprovider-provider&quot;&gt;$routeProvider provider&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#whenpath-route-method&quot;&gt;when(path, route) method&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#otherwiseparams-method&quot;&gt;otherwise(params) method&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#services-in-ngroute&quot;&gt;Services in ngRoute&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#route-service&quot;&gt;$route service&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#methods&quot;&gt;Methods&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#events&quot;&gt;Events&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#properties&quot;&gt;Properties&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#routeparams-service&quot;&gt;$routeParams service&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ti-liu-tham-kho&quot;&gt;Tài liệu tham khảo&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/section&gt;

&lt;h2 id=&quot;cch-thc-s-dng&quot;&gt;Cách thức sử dụng&lt;/h2&gt;

&lt;p&gt;Từ phiên bản 1.2, module &lt;code&gt;ngRoute&lt;/code&gt; được tách ra khỏi Angular core và trở thành một module riêng. Do đó, để sử dụng module này, chúng ta cần include nó trong file html.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;angular.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;angular-route.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Sau đó, chúng ta cần khai báo &lt;code&gt;ngRoute&lt;/code&gt; là module phụ thuộc của ứng dụng của chúng ta:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;angular&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;myApp&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;ngRoute&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;ngview-directive&quot;&gt;ngView directive&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.angularjs.org/api/ngRoute/directive/ngView&quot;&gt;ngView&lt;/a&gt; là một chỉ thị lệnh (directive) bổ sung cho $route service bằng cách bao gồm các template đã được biểu diễn (rendered) của route hiện tại (current route) vào trong file layout chính (thường là index.html). Mỗi lần thay đổi current route, view đi kèm với nó cũng thay đổi theo phù hợp với cấu hình của $route service.&lt;/p&gt;

&lt;p&gt;Trong ứng dụng angular, chúng ta cần định nghĩa &lt;code&gt;ngView&lt;/code&gt; directive &lt;strong&gt;một lần&lt;/strong&gt;. Đây là phần giữ chỗ cho các views. Có ba cách để định nghĩa ngView trong file html chính như sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;ng-view&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/div&amp;gt;&lt;/span&gt; 		// as attribute
...
&lt;span class=&quot;nt&quot;&gt;&amp;lt;ng-view&amp;gt;&amp;lt;/ng-view&amp;gt;&lt;/span&gt; 		// as element
...
&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;ng-view&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/div&amp;gt;&lt;/span&gt; 	// as CSS class&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Lưu ý&lt;/strong&gt;: Trong toàn bộ một ứng dụng SPA, &lt;code&gt;ngView&lt;/code&gt; directive &lt;strong&gt;chỉ được sử dụng duy nhất một lần&lt;/strong&gt;.&lt;/p&gt;

&lt;h2 id=&quot;routeprovider-provider&quot;&gt;$routeProvider provider&lt;/h2&gt;

&lt;p&gt;Trong ứng dụng angularjs, các provider được bơm vào (inject) trong hàm &lt;strong&gt;config()&lt;/strong&gt;. Khi $routeProvider được khai báo, chúng ta có thể sử dụng các service mà nó cung cấp là &lt;code&gt;$route&lt;/code&gt; service và &lt;code&gt;$routeParams&lt;/code&gt; service để định tuyến.&lt;/p&gt;

&lt;p&gt;$routeProvider sử dụng phương thức &lt;code&gt;$routeProvider.when()&lt;/code&gt; để khớp một mẫu hình (pattern) URL với một view và phương thức &lt;code&gt;$routeProvider.otherwise()&lt;/code&gt; để trả lại một view khi current url không khớp với bất kỳ mẫu hình URL nào được đưa ra.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;angular&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;myApp&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;ngRoute&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;templateUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;pages/home.html&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;MainController&amp;#39;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/about&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;This is about page!!!&amp;#39;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;otherwise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;redirectTo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/&amp;#39;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;whenpath-route-method&quot;&gt;when(path, route) method&lt;/h3&gt;

&lt;p&gt;Hàm when() bao gồm hai tham số: một route path và một đối tượng Javascript.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;path&lt;/strong&gt; có kiểu string, nó khớp với phần địa chỉ trên url phía sau ký hiệu &lt;code&gt;#&lt;/code&gt; khi ứng dụng được tải lên. Chúng ta có thể truyền tham số vào path, và các tham số được lưu trữ trong $routeParams object.&lt;/p&gt;
&lt;figure&gt;
	&lt;img src=&quot;https://docs.google.com/drawings/d/1aS78XypeTPb0CFq2Md9hRT2VkayaS49czuy6T7ypZUg/pub?w=469&amp;amp;h=227&quot; /&gt;
&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;route&lt;/strong&gt; là một đối tượng Javascript, nó bao gồm các thuộc tính sau:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;templateUrl&lt;/strong&gt;: là một đường dẫn (path) hoặc một function trả về một đường dẫn đến một template html. Và đường dẫn này là đường dẫn tương đối so với file layout chính (index.html). Ví dụ:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;angular&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;myApp&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;ngRoute&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;templateUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;pages/home.html&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;MainController&amp;#39;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/books/:bookId&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;templateUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;pages/books/&amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bookId&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;.html&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;template&lt;/strong&gt;: là một template html hoặc là một function trả về một template html. Nếu thuộc tính này được khai báo cùng với thuộc tính &lt;strong&gt;templateUrl&lt;/strong&gt; thì nó sẽ được ưu tiên hơn.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;templateUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;pages/home.html&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;lt;h2&amp;gt;Hello, I am html template.&amp;lt;/h2&amp;gt;&amp;#39;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;controller&lt;/strong&gt;: khai báo bộ điều khiển (controller) sẽ điều khiển view tương ứng với template được khai báo trong thuộc tính &lt;code&gt;template&lt;/code&gt; hoặc &lt;code&gt;templateUrl&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;controllerAs&lt;/strong&gt;: bí danh (alias name) của controller. Khi sử dụng thuộc tính này, chúng ta xem controller như là một class.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;angular&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;myApp&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;ngRoute&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/about&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;templateUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;about.html&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;AboutCtrl&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;controllerAs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;about&amp;#39;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;AboutCtrl&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// don&amp;#39;t use $scope&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;flash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;Content will be display here. :)&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// use this instead of $scope&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Trong file template &lt;code&gt;about.html&lt;/code&gt;, chúng ta truy cập vào dữ liệu trong controller như sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;h2&amp;gt;&lt;/span&gt;About page&lt;span class=&quot;nt&quot;&gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;{{ about.flash }}&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;redirectTo&lt;/strong&gt;: chuyển đến một địa chỉ cụ thể. Giá trị của thuộc tính này có thể là một chuỗi (string) hoặc một function. Khi nó là function, chúng ta có thể truyền các tham số cho nó gồm &lt;code&gt;routeParams&lt;/code&gt; - đối tượng được lấy từ phương thức &lt;em&gt;$location.path()&lt;/em&gt;, &lt;code&gt;path&lt;/code&gt; - chuỗi được lấy từ phương thức &lt;em&gt;$location.path()&lt;/em&gt;, &lt;code&gt;search&lt;/code&gt; - đối tượng được lấy từ phương thức &lt;em&gt;$location.search()&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$routeProvider&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/author/:authorName/books/:bookId&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;redirectTo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;routeParams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// &amp;lt;------- is function&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;routeParams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/author/&amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;routeParams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;authorName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/author/victorhugo&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;This is Victor Hugo&amp;#39;s page.&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;otherwise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;redirectTo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/&amp;#39;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// &amp;lt;-------------is string&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;resolve&lt;/strong&gt;: một resolve chứa một hoặc nhiều lời hứa (promises), các promises phải được giải quyết thành công (resolve) trước khi route thay đổi. Điều này có nghĩa là chúng ta có thể đợi dữ liệu sẵn sàng trước khi hiển thị trên view và làm đơn giản hóa việc khởi tạo model bên trong một controller vì dữ liệu ban đầu được trao cho controller thay vì controller phải đi ra ngoài và tự tìm kiếm dữ liệu. Chúng ta sẽ tìm hiểu chi tiết về thuộc tính này trong bài &lt;a href=&quot;/angularjs/resolve-trong-angularjs-routes&quot;&gt;Hiểu về ‘Resolve’ trong AngularJS routes&lt;/a&gt;.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;reloadOnSearch&lt;/strong&gt;: thuộc tính này được thiết lập mặc định giá trị &lt;em&gt;true&lt;/em&gt;. Thuộc tính này cho phép tải lại route khi $location.search() hoặc $location.hash() thay đổi.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;caseInsensitiveMatch&lt;/strong&gt;: giá trị mặc định của thuộc tính này là &lt;em&gt;false&lt;/em&gt;, nó cho phép ứng dụng thỏa mãn các route mà không cần phân biệt chữ hoa, chữ thường.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;otherwiseparams-method&quot;&gt;otherwise(params) method&lt;/h3&gt;

&lt;p&gt;Phương thức này được dùng để điều hướng route đến một địa chỉ cụ thể khi url đưa ra không phù hợp với bất kỳ khai báo nào.&lt;/p&gt;

&lt;h2 id=&quot;services-in-ngroute&quot;&gt;Services in ngRoute&lt;/h2&gt;

&lt;h3 id=&quot;route-service&quot;&gt;$route service&lt;/h3&gt;

&lt;h4 id=&quot;methods&quot;&gt;Methods&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;reload()&lt;/strong&gt;: phương thức này cho phép ứng dụng tải lại current route ngay cả khi $location không thay đổi.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;updateParams(newParams)&lt;/strong&gt;: cho phép thay thế các tham số của URL hiện tại bằng các tham số trong &lt;em&gt;newParams&lt;/em&gt;.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;events&quot;&gt;Events&lt;/h4&gt;

&lt;p&gt;Trước khi một route thay đổi, $route sẽ phát sinh một sự kiện &lt;strong&gt;$routeChangeStart&lt;/strong&gt;. Lúc này, $route service bắt đầu giải quyết tất cả các phụ thuộc cần thiết để tiến hành thay đổi route. Khi các phụ thuộc được giải quyết (resolve), $route service sẽ phát sinh sự kiện &lt;strong&gt;$routeChangeSuccess&lt;/strong&gt; và khi đó controller được khởi tạo và render view tương ứng. Nếu các phụ thuộc không được giải quyết (reject) thì $route service sẽ phát sinh sự kiện &lt;strong&gt;$routeChangeError&lt;/strong&gt; và khi đó controller không được khởi tạo và cũng không có view nào được render. Các sự kiện trong $route khi được kích hoạt luôn tác động lên root scope.&lt;/p&gt;

&lt;p&gt;$route service còn cung cấp sự kiện &lt;strong&gt;$routeUpdate&lt;/strong&gt; khi thuộc tính &lt;strong&gt;reloadOnSearch&lt;/strong&gt; được thiết lập giá trị &lt;em&gt;false&lt;/em&gt;.&lt;/p&gt;

&lt;h4 id=&quot;properties&quot;&gt;Properties&lt;/h4&gt;

&lt;p&gt;$route cung cấp thuộc tính &lt;strong&gt;current&lt;/strong&gt; để tham chiếu đến current route. Bạn có thể tham khảo &lt;a href=&quot;https://docs.angularjs.org/api/ngRoute/service/$route#example&quot;&gt;ví dụ về $route&lt;/a&gt; để hiểu rõ hơn.&lt;/p&gt;

&lt;h3 id=&quot;routeparams-service&quot;&gt;$routeParams service&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;$routeParams&lt;/strong&gt; service cho phép bạn lấy được giá trị đang được thiết lập của tham số truyền vào trên route. Các tham số của route là sự kết hợp của &lt;a href=&quot;https://docs.angularjs.org/api/ng/service/$location#path&quot;&gt;$location.path()&lt;/a&gt; và &lt;a href=&quot;https://docs.angularjs.org/api/ng/service/$location#search&quot;&gt;$location.search()&lt;/a&gt;.&lt;/p&gt;

&lt;figure&gt;
	&lt;img src=&quot;https://docs.google.com/drawings/d/1KQe7BdYTSW14zQllb-7yCtYgRry9GqZQJkAJGUfSK50/pub?w=861&amp;amp;h=225&quot; /&gt;
&lt;/figure&gt;

&lt;p&gt;Nếu tên của các tham số trong &lt;code&gt;path&lt;/code&gt; và &lt;code&gt;search&lt;/code&gt; xung đột nhau, thì các tham số của &lt;code&gt;path&lt;/code&gt; sẽ được ưu tiên.&lt;/p&gt;
&lt;figure&gt;
	&lt;img src=&quot;https://docs.google.com/drawings/d/1X8B1sAVfH6GrazPABuVpoGnlfkTboURz5gdwHBtFjOw/pub?w=885&amp;amp;h=319&quot; /&gt;
&lt;/figure&gt;

&lt;h2 id=&quot;ti-liu-tham-kho&quot;&gt;Tài liệu tham khảo&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.angularjs.org/api/ngRoute/&quot;&gt;AngularJS’s document on ngRoute&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

  &lt;p&gt;&lt;a href=&quot;/angularjs/tim-hieu-module-ngRoute-trong-angularjs&quot;&gt;Tìm hiểu module ngRoute trong AngularJS&lt;/a&gt; was originally published by Ta Ly at &lt;a href=&quot;&quot;&gt;THAPSANG.NET&lt;/a&gt; on October 23, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Routing Single Page Application với module ngRoute của AngularJS]]></title>
  <link>/angularjs/routing-single-page-application-voi-module-ngRoute-cua-angularjs</link>
  <id>/angularjs/routing-single-page-application-voi-module-ngRoute-cua-angularjs</id>
  <published>2014-10-21T00:00:00+07:00</published>
  <updated>2014-10-21T00:00:00+07:00</updated>
  <author>
    <name>Ta Ly</name>
    <uri></uri>
    <email>taly2808@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;Các ứng dụng Single Page ngày càng trở nên phổ biến. Khi ứng dụng của chúng ta lớn dần, việc đặt tất cả các views vào trong một file sẽ khiến chúng ta rất khó quản lý. Việc chia nhỏ chúng vào trong Views và sử dụng Routing để tải các phần khác nhau của ứng dụng giúp chúng ta phân chia ứng dụng hợp lý và quản lý dễ dàng hơn.
Routing trong AngularJS có thể được sử dụng với module &lt;a href=&quot;https://docs.angularjs.org/api/ngRoute&quot;&gt;ngRoute&lt;/a&gt; hoặc sử dụng &lt;a href=&quot;https://github.com/angular-ui/ui-router&quot;&gt;UI Route&lt;/a&gt;. Trong bài viết này, tôi sẽ sử dụng routing của module &lt;strong&gt;ngRoute&lt;/strong&gt;. Chúng ta sẽ tìm hiểu cách thức chia nhỏ một SPA thành nhiều views như thế nào.&lt;/p&gt;

&lt;section&gt;
  &lt;header&gt;
    &lt;h2&gt;Nội dung&lt;/h2&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#gii-thiu-v-routeprovider&quot;&gt;Giới thiệu về $routeProvider&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#ng-dng-n-gin&quot;&gt;Ứng dụng đơn giản&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#cu-trc-th-mc&quot;&gt;Cấu trúc thư mục&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#html&quot;&gt;HTML&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#cu-hnh-routes-v-views&quot;&gt;Cấu hình Routes và Views&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#thm-cc-file-templates-html&quot;&gt;Thêm các file templates HTML&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#cch-thc-truyn-tham-s-vo-trong-route-urls&quot;&gt;Cách thức truyền tham số vào trong Route Urls&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ti-liu-tham-kho&quot;&gt;Tài liệu tham khảo&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/section&gt;

&lt;h2 id=&quot;gii-thiu-v-routeprovider&quot;&gt;Giới thiệu về $routeProvider&lt;/h2&gt;

&lt;p&gt;Sự kỳ diệu của Routing được thực hiện bởi một service provider do Angular cung cấp có tên là &lt;code&gt;$routeProvider&lt;/code&gt;. Một &lt;code&gt;Angular&#39;s service&lt;/code&gt; là một đối tượng đơn nhất (singleton object) được tạo ra bởi một service factory. Các service factory này do một service provider tạo ra. Các service providers là các hàm cấu tử (constructror functions). Khi tạo đối tượng, chúng phải chứa một thuộc tính $get để nắm giữ các service factory function. Để hiểu rõ hơn về các khái niệm trên, bạn có thể tham khảo bài viết &lt;a href=&quot;http://acegik.net/blog/javascript/angularjs/tong-quan-ve-dependency-injection-trong-angularjs-p2.html&quot;&gt;Tổng quan về Dependency Injection trong AngularJS&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Định tuyến ứng dụng trong AngularJS được khai báo thông qua &lt;code&gt;$routeProvider&lt;/code&gt;. $routeProvider là nhà cung cấp các dịch vụ &lt;code&gt;$route&lt;/code&gt;. Dịch vụ này cho phép kết nối các controllers, view templates và các địa chỉ URL hiện tại trên trình duyệt lại với nhau một cách dễ dàng. Với tính năng này, chúng ta có thể thực hiện các liên kết sâu trên trình duyệt  - &lt;a href=&quot;http://en.wikipedia.org/wiki/Deep_linking&quot;&gt;deep linking&lt;/a&gt; - để sử dụng lịch sử của trình duyệt và đánh dấu (bookmark).&lt;/p&gt;

&lt;h3 id=&quot;ng-dng-n-gin&quot;&gt;Ứng dụng đơn giản&lt;/h3&gt;

&lt;p class=&quot;text-center&quot;&gt;&lt;a class=&quot;btn btn-info btn-large&quot; href=&quot;http://plnkr.co/edit/tVKCg2gr1VlA3ickPBTN?p=preview&quot; target=&quot;_blank&quot;&gt;&lt;span class=&quot;fa fa-code&quot;&gt;&lt;/span&gt; View Code&lt;/a&gt;
&lt;a class=&quot;btn btn-success btn-large&quot; href=&quot;http://embed.plnkr.co/tVKCg2gr1VlA3ickPBTN/&quot; target=&quot;_blank&quot;&gt;View Demo&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Để dễ hình dung, chúng ta sẽ xây dựng một site đơn giản với ba trang: home, about, contact. Chúng ta sẽ xây dựng site này trên một trang, nội dung các trang sẽ thay đổi tương ứng mà không cần refresh trình duyệt. AngularJS cho phép xây dựng các ứng dụng nhiều chức năng hơn, nhưng trong ví dụ này, tôi sẽ trình bày những thứ chúng ta cần để có thể phát triển các ứng dụng lớn hơn.&lt;/p&gt;

&lt;p&gt;Routing giúp chúng ta chia nhỏ ứng dụng của mình thành các views một cách logic và móc nối các views khác nhau với các Controller tương ứng.&lt;/p&gt;

&lt;figure&gt;
	&lt;a href=&quot;https://docs.google.com/drawings/d/1WQWuJ2UnLI6hcZHM2CXQ0BRjNEqqqXNeGLgJz-vv5EM/pub?w=480&amp;amp;h=360&quot;&gt;&lt;img src=&quot;https://docs.google.com/drawings/d/1WQWuJ2UnLI6hcZHM2CXQ0BRjNEqqqXNeGLgJz-vv5EM/pub?w=960&amp;amp;h=720&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;Trong sơ đồ trên, chúng ta tạo ra ba Route url: /home, /about, và /contact. Mỗi route sẽ sử dụng một view cụ thể và được quản lý bởi một controller.&lt;/p&gt;

&lt;h3 id=&quot;cu-trc-th-mc&quot;&gt;Cấu trúc thư mục&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;index.html
script.js
pages/
---- home.html
---- about.html
---- contact.html&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;html&quot;&gt;HTML&lt;/h3&gt;

&lt;p&gt;Trong ví dụ này, tôi sử dụng CSS Framework &lt;a href=&quot;http://getbootstrap.com/&quot;&gt;Twitter Bootstrap&lt;/a&gt; và &lt;a href=&quot;http://fortawesome.github.io/Font-Awesome/&quot;&gt;FontAwesome&lt;/a&gt;. Từ phiên bản Angular1.2, &lt;code&gt;ngRoute&lt;/code&gt; được tách riêng thành một module, do đó chúng ta cần có lời gọi đến nó trong phần header. Và chúng ta phải có các chỉ thị lệnh (directive) của Angular (&lt;code&gt;ng-app&lt;/code&gt;). Nội dung file &lt;code&gt;index.html&lt;/code&gt; như sau:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/taly2808/0376169f72e2d37ae3de.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Trong đường link dẫn đến các trang, chúng ta sử dụng dấu &lt;code&gt;#&lt;/code&gt; (hash address) để trình duyệt không chuyển đến trang home.html, about.html, contact.html. Và trong nội dung của thẻ div có &lt;code&gt;id=&quot;main&quot;&lt;/code&gt;, chúng ta cần thêm thẻ div với chỉ thị lệnh &lt;code&gt;ng-view&lt;/code&gt; để include template của các route (/home, /about, /contact) trong file layout chính (&lt;code&gt;index.html&lt;/code&gt;).&lt;/p&gt;

&lt;h3 id=&quot;cu-hnh-routes-v-views&quot;&gt;Cấu hình Routes và Views&lt;/h3&gt;
&lt;p&gt;Chúng ta định nghĩa một ứng dụng angular &lt;code&gt;spaApp&lt;/code&gt; sử dụng phương thức &lt;code&gt;angular.module&lt;/code&gt;. Tiếp đến, chúng ta sử dụng phương thức &lt;code&gt;config()&lt;/code&gt; để cấu hình &lt;code&gt;$routeProvider&lt;/code&gt;. $routeProvider cung cấp các phương thức &lt;code&gt;when()&lt;/code&gt;, &lt;code&gt;otherwise()&lt;/code&gt; để định nghĩa các routes trong ứng dụng của chúng ta. Nội dung của file &lt;code&gt;script.js&lt;/code&gt; như sau:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/taly2808/83d19aa063bf87d4bac2.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Trong kịch bản trên, chúng ta định nghĩa ba urls &lt;code&gt;/home&lt;/code&gt;, &lt;code&gt;/about&lt;/code&gt; và &lt;code&gt;/contact&lt;/code&gt; và ánh xạ chúng tới các views tương ứng &lt;code&gt;pages/home.html&lt;/code&gt;, &lt;code&gt;pages/about.html&lt;/code&gt; và &lt;code&gt;pages/contact.html&lt;/code&gt;. Khi chúng ta nhập vào địa chỉ &lt;code&gt;http:myapp/#home&lt;/code&gt; trên trình duyệt, Angular sẽ tự động khớp nó với route mà chúng ta cấu hình và tải template &lt;code&gt;pages/home.html&lt;/code&gt;. Sau đó nó gọi đến HomeController xử lý các tác vụ liên quan đến Home View.&lt;/p&gt;

&lt;p&gt;Chúng ta sử dụng phương thức &lt;code&gt;otherwise()&lt;/code&gt; để định nghĩa route mặc định (default route). Trong trường hợp routeProvider gặp url không phù hợp với bất kỳ url nào đã được khai báo, nó sẽ chuyển đến default route.&lt;/p&gt;

&lt;h3 id=&quot;thm-cc-file-templates-html&quot;&gt;Thêm các file templates HTML&lt;/h3&gt;

&lt;p&gt;Chúng ta cần thêm các file templates, các templates này sẽ được bơm vào layout chính.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;pages/home.html&lt;/em&gt;
&lt;script src=&quot;https://gist.github.com/taly2808/0498e77df4156ebbabde.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;pages/about.html&lt;/em&gt;
&lt;script src=&quot;https://gist.github.com/taly2808/7b34b8adfac19f4ac538.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;pages/contact.html&lt;/em&gt;
&lt;script src=&quot;https://gist.github.com/taly2808/a6102a2f6f67654e769e.js&quot;&gt;&lt;/script&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Chạy ứng dụng trên local&lt;/strong&gt;: Angular routing chỉ có thể làm việc trong môi trường có web server. Do đó, nếu bạn chạy ứng dụng trên local thì cần chắc chắn rằng bạn sử dụng &lt;code&gt;http://localhost&lt;/code&gt; hoặc thiết lập môi trường cho nó.&lt;/p&gt;

&lt;h2 id=&quot;cch-thc-truyn-tham-s-vo-trong-route-urls&quot;&gt;Cách thức truyền tham số vào trong Route Urls&lt;/h2&gt;

&lt;p&gt;Trong ví dụ trên, chúng ta đã tìm hiểu cách định nghĩa route. Bây giờ chúng ta sẽ tìm hiểu cách định nghĩa tham số trong route urls.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://docs.google.com/drawings/d/1Ie7HOi_fo-J2XycDIG3T2JAYmmXw2L7ivfRf_6Qx5ms/pub?w=923&amp;amp;h=194&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Chúng ta muốn hiển thị chi tiết thông tin của các contact khác nhau. Dựa trên tham số userId, chúng ta sẽ định nghĩa contact detail trên view. Trong Angular, khi định nghĩa route, chúng ta có thể định nghĩa tham số &lt;code&gt;userId&lt;/code&gt; trong url. Trong file &lt;code&gt;script.js&lt;/code&gt;, chúng ta bổ sung phần định tuyến cho contact detail như sau: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/contact/:userId&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;templateUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;pages/contact-detail.html&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;ContactDetailController&amp;#39;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Và chúng ta đọc tham số này trong ContactDetailController bằng cách sử dụng &lt;code&gt;$routeParams.userId&lt;/code&gt;. Khi đó, phần định nghĩa ContactDetailController trong file &lt;code&gt;script.js&lt;/code&gt; như sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;ContactDetailController&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;$scope&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;$routeParams&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$routeParams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$scope&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;userId&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$routeParams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;userId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}])&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Lưu ý: chúng ta cần truyền tham số &lt;code&gt;$routeParams&lt;/code&gt; vào trong controller, nếu không chúng ta sẽ không thể dùng được nó để lấy tham số truyền vào thông qua url.&lt;/p&gt;

&lt;p&gt;Trong file template &lt;code&gt;pages/contact.html&lt;/code&gt;, nội dung thay đổi như sau:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/taly2808/6cab4af46d134eed7120.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Nội dung của &lt;code&gt;pages/contact-detail.html&lt;/code&gt; như sau:&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/taly2808/22211dc7315bf948a74c.js&quot;&gt;&lt;/script&gt;

&lt;p&gt;Trong bài viết này, tôi đã đưa ra một ví dụ đơn giản về routing để mọi người có thể định hình được chức năng cơ bản của module &lt;code&gt;ngRoute&lt;/code&gt; trong AngularJS. Trong bài &lt;a href=&quot;/angularjs/tim-hieu-module-ngRoute-trong-angularjs&quot;&gt;Tìm hiểu module ngRoute trong AngularJS&lt;/a&gt; chúng ta sẽ đi sâu vào tìm hiểu các thành phần trong module &lt;code&gt;ngRoute&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;ti-liu-tham-kho&quot;&gt;Tài liệu tham khảo&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.angularjs.org/api/ngRoute/provider/$routeProvider&quot;&gt;AngularJS’s document on $routeProvider&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.angularjs.org/tutorial/step_07&quot;&gt;AngularJS’s document on Routing &amp;amp; Multiple Views&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

  &lt;p&gt;&lt;a href=&quot;/angularjs/routing-single-page-application-voi-module-ngRoute-cua-angularjs&quot;&gt;Routing Single Page Application với module ngRoute của AngularJS&lt;/a&gt; was originally published by Ta Ly at &lt;a href=&quot;&quot;&gt;THAPSANG.NET&lt;/a&gt; on October 21, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Cấu trúc thư mục cho ứng dụng AngularJS]]></title>
  <link>/angularjs/cau-truc-thu-muc-voi-ung-dung-angularjs</link>
  <id>/angularjs/cau-truc-thu-muc-voi-ung-dung-angularjs</id>
  <published>2014-10-12T00:00:00+07:00</published>
  <updated>2014-10-12T00:00:00+07:00</updated>
  <author>
    <name>Ta Ly</name>
    <uri></uri>
    <email>taly2808@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;Khi bắt đầu xây dựng một ứng dụng AngularJS, có thể bạn không biết chính xác cách thức tổ chức các files, hoặc thậm chí là không biết mình cần những files nào. Trong bài viết này, tôi sẽ trình bày về cách tạo ra một ứng dụng bằng AngularJS và cách tổ chức cấu trúc thư mục với các ứng dụng ở các mức độ khác nhau.&lt;/p&gt;

&lt;section&gt;
  &lt;header&gt;
    &lt;h2&gt;Nội dung&lt;/h2&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#to-ng-dng-n-gin&quot;&gt;Tạo ứng dụng đơn giản&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#typical-struture&quot;&gt;Typical Struture&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#nguyn-tc-lift&quot;&gt;Nguyên tắc LIFT&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#la-chn-cu-trc-khi-ng-dng-ln-dn-ln&quot;&gt;Lựa chọn cấu trúc khi ứng dụng lớn dần lên&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#cu-trc-by-type&quot;&gt;Cấu trúc by type&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#cu-trc-by-feature&quot;&gt;Cấu trúc by feature&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#kt-lun&quot;&gt;Kết luận&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/section&gt;

&lt;h2 id=&quot;to-ng-dng-n-gin&quot;&gt;Tạo ứng dụng đơn giản&lt;/h2&gt;

&lt;p&gt;Bạn chỉ cần 1 thư mục gồm 1 file &lt;code&gt;index.html&lt;/code&gt; và 1 file &lt;code&gt;app.js&lt;/code&gt; như sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;app/
----index.html
----app.js&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Trong file &lt;code&gt;index.html&lt;/code&gt;, chúng ta cần gọi đến thư viện angularjs, file &lt;code&gt;app.js&lt;/code&gt; và sử dụng các chỉ thị lệnh (directive) &lt;code&gt;ng-&lt;/code&gt; đã được xây dựng sẵn cho ứng dụng angularjs. Bạn có thể tìm hiểu thêm trong &lt;a href=&quot;https://docs.angularjs.org/guide&quot;&gt;tài liệu về AngularJS&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Hiện nay, việc sử dụng cấu trúc thư mục ứng dụng như thế nào là tốt nhất đang là vấn đề được quan tâm đối với một số nhà phát triển. Dĩ nhiên, không có mô hình nào được coi là hoàn hảo. Tôi sẽ trình bày các xu hướng cấu trúc thư mục đang được áp dụng hiện nay.&lt;/p&gt;

&lt;h2 id=&quot;typical-struture&quot;&gt;Typical Struture&lt;/h2&gt;

&lt;p&gt;Trong đa số các tutorial hướng dẫn về angularjs, cấu trúc thư mục được áp dụng như sau: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;app/
----- controllers/
---------- mainController.js
---------- otherController.js
----- directives/
---------- mainDirective.js
---------- otherDirective.js
----- services/
---------- userService.js
---------- itemService.js
----- js/
---------- bootstrap.js
---------- jquery.js
----- app.js
assets/
----- img/      // Images and icons &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; your app
----- css/      // All styles and style related files &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;SCSS or LESS files&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
----- js/       // JavaScript files written &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; your app that are not &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; angular
----- libs/     // Third-party libraries such as jQuery, Moment, Underscore, etc.
views/
----- mainView.html
----- otherView.html
----- index.html&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Đây là cấu trúc đặc trưng thường thấy. Với cấu trúc này, chúng ta tách riêng từng loại file vào chung một thư mục, controllers có thư mục riêng cho controllers, directives có thư mục riêng cho directives, …. Nó khá giống với cách tổ chức của các MVC framework. Cấu trúc này phù hợp với các ví dụ và các &lt;strong&gt;ứng dụng nhỏ&lt;/strong&gt; và cho những người mới bắt đầu tìm hiểu AngularJS vì nó giúp cho người đọc dễ hình dung và có thể khái quát hóa các khái niệm đang được nghiên cứu.&lt;/p&gt;

&lt;h2 id=&quot;nguyn-tc-lift&quot;&gt;Nguyên tắc LIFT&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://twitter.com/John_Papa&quot;&gt;John Papa&lt;/a&gt; đưa ra nguyên tắc khi cấu trúc thư mục rất hữu ích trong bài viết &lt;a href=&quot;http://www.johnpapa.net/angular-app-structuring-guidelines/&quot;&gt;Angular App Structuring Guidelines&lt;/a&gt; đó là &lt;strong&gt;LIFT&lt;/strong&gt; (Locating - Indenty - Flat - T-DRY).&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;Locating&lt;/strong&gt;: dễ dàng định vị được file cần tìm.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Indentify&lt;/strong&gt;: xác định được đoạn code chúng ta cần tìm một cách nhanh chóng.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Flat&lt;/strong&gt;: làm phẳng cấu trúc nhất có thể.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;T-DRY&lt;/strong&gt;: cố gắng để không lặp lại những gì đã làm (Try to Don’t Repeat Yourself).&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;la-chn-cu-trc-khi-ng-dng-ln-dn-ln&quot;&gt;Lựa chọn cấu trúc khi ứng dụng lớn dần lên&lt;/h2&gt;

&lt;p&gt;Có nhiều cách để tổ chức thư mục. Ở đây, chúng ta tập trung vào 2 cách cấu trúc: By Type (theo loại file) và By Feature (theo đặc tính).&lt;/p&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/img/NgStructureCompare.jpg&quot;&gt;&lt;img src=&quot;/assets/img/NgStructureCompare.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;h3 id=&quot;cu-trc-by-type&quot;&gt;Cấu trúc by type&lt;/h3&gt;

&lt;p&gt;Với cấu trúc by type theo cột bên trái, sẽ phù hợp với các ứng dụng nhỏ. Khi các chức năng nhiều dần lên, giả sử chúng ta có nhiều hơn 10 controllers, directives, views, và chúng ta muốn thay đổi một nội dung naò đó. Khi đó, chúng ta vẫn có thể xác định được các files cần thiết trong từng thư mục riêng biệt nhưng sẽ khó khăn trong việc tìm thấy file đó ngay lập tức trong cả mớ file controller, directive, views, …. Khi đó, chúng ta chuyển sang cấu trúc theo tính năng (by feature).&lt;/p&gt;

&lt;h3 id=&quot;cu-trc-by-feature&quot;&gt;Cấu trúc by feature&lt;/h3&gt;

&lt;p&gt;Với cấu trúc &lt;code&gt;by feature&lt;/code&gt; (cột bên phải hình), chúng ta sẽ nhóm các files có liên quan đến một tính năng nào đó vào trong cùng một thư mục. Nó sẽ bao gồm các file view, directive , controller, service cho tính năng đó. Chúng ta có thể coi mỗi một folder theo feature là một mô hình MVC thu nhỏ. Với cách này, khi cần thay đổi một tính năng nào đó, chúng ta có thể dễ dàng và nhanh chóng xác định được vị trí và đoạn code chúng ta cần làm việc, nó giúp chúng rút ngắn được thời gian phát triển của dự án.&lt;/p&gt;

&lt;h2 id=&quot;kt-lun&quot;&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Có rất nhiều cách để tổ chức cấu trúc thư mục ứng dụng và không có cách nào là hoàn hảo. Chúng ta dựa trên quy mô ứng dụng để chọn một cấu trúc phù hợp với ứng dụng của mình. Các bạn cũng có thể tự tạo ra cấu trúc của riêng mình ;). Và điều quan trọng nhất vẫn là cấu trúc phải rõ ràng và chúng ta có thể dễ dàng và nhanh chóng xác định được cái mà chúng ta cần làm.&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/angularjs/cau-truc-thu-muc-voi-ung-dung-angularjs&quot;&gt;Cấu trúc thư mục cho ứng dụng AngularJS&lt;/a&gt; was originally published by Ta Ly at &lt;a href=&quot;&quot;&gt;THAPSANG.NET&lt;/a&gt; on October 12, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Quản lý tài nguyên public trong Laravel 4 với Asset Pipeline]]></title>
  <link>/laravel/quan-ly-tai-nguyen-public-trong-laravel-voi-asset-pipeline</link>
  <id>/laravel/quan-ly-tai-nguyen-public-trong-laravel-voi-asset-pipeline</id>
  <published>2014-10-04T00:00:00+07:00</published>
  <updated>2014-10-04T00:00:00+07:00</updated>
  <author>
    <name>Ta Ly</name>
    <uri></uri>
    <email>taly2808@gmail.com</email>
  </author>
  <content type="html">&lt;figure&gt;
	&lt;a href=&quot;/assets/img/pipeline.jpg&quot;&gt;&lt;img src=&quot;/assets/img/pipeline.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;Trong laravel 4, có nhiều cách để bạn quản lý các tài nguyên css, js, hình ảnh của mình. Trong bài này, tôi sẽ giới thiệu với bạn một cách để quản lý các tài nguyên (assets) để chúng có thể phục vụ trình duyệt một cách hiệu quả nhất có thể với Asset Pipeline.&lt;/p&gt;

&lt;p&gt;Laravel 4 không có sẵn tính năng này. Nhưng bạn hoàn toàn có thể cài đặt một package từ cộng đồng để có được chức năng tuyệt vời này trong project của bạn.&lt;/p&gt;

&lt;p&gt;Note: &lt;strong&gt;Asset Pipeline&lt;/strong&gt; có thể hiểu là đường ống dẫn tài nguyên. Trong khuôn khổ bài viết, tôi sẽ sử dụng từ &lt;strong&gt;Asset Pipeline&lt;/strong&gt; để bạn có thể quen với từ này và tìm kiếm tài liệu cũng như kiến thức liên quan bằng tiếng Anh được dễ hơn.&lt;/p&gt;

&lt;section&gt;
  &lt;header&gt;
    &lt;h2&gt;Nội dung&lt;/h2&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#what-is-an-asset-pipeline&quot;&gt;What is an asset pipeline?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#install-asset-pipeline&quot;&gt;Install Asset Pipeline&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#working-with-asset-pipeline&quot;&gt;Working with asset pipeline&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#configuration-options&quot;&gt;Configuration options&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/section&gt;

&lt;h2 id=&quot;what-is-an-asset-pipeline&quot;&gt;What is an asset pipeline?&lt;/h2&gt;

&lt;p&gt;Trước tiên, có lẽ tôi nên giải thích chính xác thì nó là cái gì.&lt;/p&gt;

&lt;p&gt;Khi triển khai một website trên Internet, trình duyệt phải lấy tất cả các assets (bao gồm các file css, js, images) để tạo nên trang web. Do đó, để lấy được mỗi tập tin CSS hay Javascript, trình duyệt cần tạo ra các request riêng. Theo thời gian, các file CSS và Javascript có thể sẽ lớn dần lên, nếu bạn làm với các project lớn.&lt;/p&gt;

&lt;p&gt;Asset pipeline sẽ tự động kết hợp tất cả các files tài nguyên vào trong một file duy nhất và tối thiểu hóa (minify) code trong đó. Điều đó có nghĩa là trình duyệt chỉ phải thực hiện &lt;strong&gt;1&lt;/strong&gt; request duy nhất, kích cỡ file cũng giảm đi đáng kể và nó sẽ có ảnh hưởng lớn đến hiệu năng của trang web.&lt;/p&gt;

&lt;p&gt;Thời gian gần đây, các developers có xu hướng viết CSS sử dụng LESS hoặc SASS, hoặc họ dùng CoffeeScript thay vì Javascript thông thường. Asset pipeline cũng sẽ tự động biên dịch tất cả chúng thành một file CSS hoặc Javascript thông thường.&lt;/p&gt;

&lt;p&gt;Thêm nữa là, asset pipeline cũng sẽ tự động cache các files stylesheets và javascripts khi bạn triển khai trong môi trường production. Do đó, các files này sẽ không phải download lại mỗi lần tải lại trang nếu chúng không có gì thay đổi.&lt;/p&gt;

&lt;p&gt;Đó là các lý do tại sao bạn nên sử dụng asset pipeline. Asset pipeline có rất nhiều lợi ích tuyệt vời, ngay cả khi bạn không có ý định sử dụng một bộ tiền xử lý (preprocessor) (như LESS hay SASS) hay chỉ muốn viết javascript thuần :).&lt;/p&gt;

&lt;h2 id=&quot;install-asset-pipeline&quot;&gt;Install Asset Pipeline&lt;/h2&gt;

&lt;p&gt;Hiện tại, tôi đang sử dụng package &lt;a href=&quot;https://github.com/CodeSleeve/asset-pipeline&quot;&gt;Asset Pipeline&lt;/a&gt; này trong các project của mình.&lt;/p&gt;

&lt;p&gt;Để cài đặt package, đơn giản là bạn chỉ cần thêm dòng sau dưới đây vào file &lt;code&gt;composer.json&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-json&quot; data-lang=&quot;json&quot;&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;require&amp;quot;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;quot;codesleeve/asset-pipeline&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;dev-master&amp;quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Tiếp đó, bạn chạy lệnh sau để cập nhật các phụ thuộc và tải package &lt;strong&gt;asset pineline&lt;/strong&gt; về:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;composer update&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Tiếp đến, chúng ta cần nói cho Laravel biết về service provider (người cung cấp dịch vụ). Bạn thêm dòng code dưới dây vào phần &lt;code&gt;providers&lt;/code&gt; trong file &lt;code&gt;app/config/app.php&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-json&quot; data-lang=&quot;json&quot;&gt;&lt;span class=&quot;err&quot;&gt;&amp;#39;Codesleeve\AssetPipeline\AssetPipelineServiceProvider&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Sau đó, asset pipeline sẽ có các cách hành xử khác nhau phụ thuộc vào môi trường bạn đang thiết lập. Trong môi trường production, tất cả các file của bạn sẽ được nén lại (compress), ghép nối với nhau (concatenate) và sao lưu (cache). Nếu bạn không muốn điều đó xảy ra trong môi trường developing, bạn cần thiết lập chính xác môi trường triển khai của mình. Để chắc chắn rằng bạn đang thiết lập môi trường &lt;strong&gt;local&lt;/strong&gt; cho project của mình, bạn kiểm tra phần thiết lập môi trường trong file &lt;code&gt;bootstrap/start.php&lt;/code&gt; như sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;x&quot;&gt;$env = $app-&amp;gt;detectEnvironment(array(&lt;/span&gt;
&lt;span class=&quot;x&quot;&gt;	&amp;#39;local&amp;#39; =&amp;gt; array(&amp;#39;localhost&amp;#39;),&lt;/span&gt;
&lt;span class=&quot;x&quot;&gt;));&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Cuối cùng, bạn cần tạo ra các files asset của riêng mình bằng cách nhập vào lệnh sau từ Terminal: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;php artisan assets:setup&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;working-with-asset-pipeline&quot;&gt;Working with asset pipeline&lt;/h2&gt;

&lt;p&gt;Và giờ, project của bạn đã được cài đặt asset pipeline. Bạn sẽ thấy có thêm vài thư mục mới trong project. Đó là thư mục &lt;code&gt;assets&lt;/code&gt; ở dưới thư mục &lt;code&gt;app/&lt;/code&gt;, và thư mục &lt;code&gt;provider/&lt;/code&gt; ngang hàng với thư mục &lt;code&gt;app/&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;/provider/assets/javascripts/jquery.min.js
/provider/assets/stylesheets/readme.txt
/app/assets/javascripts/application.js
/app/assets/images/readme.txt
/app/assets/stylesheets/application.css&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Hai files &lt;code&gt;/app/assets/javascripts/application.js&lt;/code&gt; và &lt;code&gt;/app/assets/stylesheets/application.css&lt;/code&gt; sẽ bao gồm tất cả các files tài nguyên khác trong cùng thư mục và chúng ta sử dụng chúng để cung cấp các tài nguyên cho trang web.&lt;/p&gt;

&lt;p&gt;Để thêm các asset files vào trong HTML template, bạn thêm hai thẻ sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;stylesheet_link_tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;javascript_include_tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Hai thẻ trên sẽ generate ra chính xác thẻ &lt;code&gt;link&lt;/code&gt; và &lt;code&gt;script&lt;/code&gt; khi bạn chạy trên trình duyệt:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;stylesheet&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text/css&amp;quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://localhost:8000/assets/application.css&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;http://localhost:8000/assets/application.js&amp;quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Bạn có thể thêm hình ảnh vào views một cách dễ dàng với thẻ &lt;code&gt;image_tag()&lt;/code&gt;. Giả sử, bạn có hình ảnh về chú chim Tweety đặt trong file &lt;code&gt;app/assets/images/tweety.png&lt;/code&gt;, bạn sẽ thay thế hình ảnh icon Laravel bằng hình ảnh Tweety Bird. Bạn thay thế nội dung trong phần body của file &lt;code&gt;app/views/hello.php&lt;/code&gt; thành: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;x&quot;&gt;&amp;lt;div class=&amp;quot;welcome&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;x&quot;&gt;	&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;image_tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;tweety.png&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;alt&amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;Tweety&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;x&quot;&gt;&amp;lt;h1&amp;gt;You have arrived.&amp;lt;/h1&amp;gt;&lt;/span&gt;
&lt;span class=&quot;x&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Bạn mở trình duyệt và gõ vào địa chỉ &lt;code&gt;http://localhost:8000&lt;/code&gt; (tùy thuộc vào cổng khi bạn chạy lệnh &lt;code&gt;php artisan serve&lt;/code&gt; nhé :D) và Enter, kết quả sẽ như thế này: &lt;/p&gt;

&lt;figure&gt;
	&lt;a href=&quot;/assets/img/welcome_laravel.jpg&quot;&gt;&lt;img src=&quot;/assets/img/image-tag-demo.png&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

&lt;p&gt;Hình ảnh chú Tweety Bird của bạn sẽ được tải lên với đường dẫn &lt;code&gt;http://localhost:8000/assets/tweety.png&lt;/code&gt;. Bạn có thể sử dụng Bug Tool để xác nhận lại ;).&lt;/p&gt;

&lt;h2 id=&quot;configuration-options&quot;&gt;Configuration options&lt;/h2&gt;

&lt;p&gt;Bạn cũng có thể thay đổi các cấu hình mặc định của package &lt;strong&gt;asset pipeline&lt;/strong&gt; này. Để làm được việc đó, bạn chạy dòng lệnh sau: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;php artisan config:publish codesleeve/asset-pipeline&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Với việc thi hành lệnh trên, nó sẽ generate ra file cấu hình asset pipeline cho project cụ thể của bạn và nó sẽ tự động ghi đè lên các thiết lập mặc định. Bạn sẽ tìm thấy file cấu hình mà bạn có thể sửa trong thư mục &lt;code&gt;app/config/packages&lt;/code&gt;. Bạn hãy xem thêm &lt;a href=&quot;https://github.com/CodeSleeve/asset-pipeline#configuration&quot;&gt;tài liệu&lt;/a&gt; để có những giải thích chi tiết hơn về các tùy chọn cấu hình.&lt;/p&gt;

&lt;p&gt;Hy vọng bạn đã có thể quản lý các asset của mình một cách dễ dàng. Have fun! ;)&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/laravel/quan-ly-tai-nguyen-public-trong-laravel-voi-asset-pipeline&quot;&gt;Quản lý tài nguyên public trong Laravel 4 với Asset Pipeline&lt;/a&gt; was originally published by Ta Ly at &lt;a href=&quot;&quot;&gt;THAPSANG.NET&lt;/a&gt; on October 04, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Xóa cache views trong laravel 4 với Artisan command]]></title>
  <link>/laravel/xoa-cache-view-trong-laravel-4-voi-artisan-command</link>
  <id>/laravel/xoa-cache-view-trong-laravel-4-voi-artisan-command</id>
  <published>2014-10-03T00:00:00+07:00</published>
  <updated>2014-10-03T00:00:00+07:00</updated>
  <author>
    <name>Ta Ly</name>
    <uri></uri>
    <email>taly2808@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;Khi phát triển ứng dụng với laravel 4, có sự thay đổi trên view nhưng khi reload ứng dụng thì bạn không hề thấy có sự thay đổi. Mặc dù đã xóa cache với lệnh &lt;code&gt;php artisan cache:clear&lt;/code&gt; nhưng vẫn không khả quan hơn. Lý do là ứng dụng của chúng ta còn lưu lại cache của views trong thư mục &lt;code&gt;app/storage/views&lt;/code&gt;. Bạn có thể truy cập vào thư mục &lt;code&gt;app/storage/views&lt;/code&gt; và xóa hết các files trong thư mục này đi. Với cách làm thủ công này chắc chắn sẽ khiến bạn phát rồ lên. Trong bài này, tôi sẽ chỉ cho bạn cách xóa views cache dễ như ăn kẹo vậy :).&lt;/p&gt;

&lt;p&gt;Chúng ta sẽ chỉ cần chạy lệnh &lt;code&gt;php artisan views:clear&lt;/code&gt; là giải quyết được vấn đề với views cache. Để làm được việc đó, chúng ta cần làm những việc sau:&lt;/p&gt;

&lt;section&gt;
&lt;div id=&quot;drawer&quot;&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#building-a-command&quot;&gt;Building A Command&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#registering-command&quot;&gt;Registering Command&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#run-command&quot;&gt;Run Command&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/section&gt;

&lt;h2 id=&quot;building-a-command&quot;&gt;Building A Command&lt;/h2&gt;

&lt;p&gt;Laravel cho phép chúng ta tự tạo ra các lệnh của riêng mình. Để tạo một lệnh mới, bạn mở trình Terminal lên, di chuyển đến thư mục chứa project và nhập vào dòng lệnh sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;x&quot;&gt;php artisan command:make ViewsCommand&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Với lệnh trên, file &lt;code&gt;ViewsCommand.php&lt;/code&gt; sẽ được generate vào thư mục &lt;code&gt;app/commands&lt;/code&gt;. Tiếp đến, bạn copy đoạn code dưới đây vào file &lt;code&gt;ViewsCommand.php&lt;/code&gt;. Bạn có thể xem thêm chi tiết về cách viết Artisan Command tại &lt;a href=&quot;http://laravel.com/docs/4.2/commands&quot;&gt;Artisan Development&lt;/a&gt; :&lt;/p&gt;

&lt;script src=&quot;https://gist.github.com/taly2808/ae1317a7ef1fbde9b575.js&quot;&gt;&lt;/script&gt;

&lt;h2 id=&quot;registering-command&quot;&gt;Registering Command&lt;/h2&gt;

&lt;p&gt;Sau khi &lt;code&gt;ViewsCommand&lt;/code&gt; được hoàn tất, bạn cần đăng ký nó với Artisan để có thể sử dụng nó. Bạn mở file &lt;code&gt;app/start/artisan.php&lt;/code&gt; và sử dụng method &lt;code&gt;Artisan::add&lt;/code&gt; để đăng ký như sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;x&quot;&gt;Artisan::add(new ViewsCommand);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;run-command&quot;&gt;Run Command&lt;/h2&gt;

&lt;p&gt;Bây giờ, bạn đã có thể xóa cache views một cách dễ dàng bằng cách chạy lệnh &lt;code&gt;php artisan views:clear&lt;/code&gt;. Kết quả như sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;php artisan views:clear
Views deleted from cache&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Hy vọng có thể giúp các bạn giải quyết được vấn đề của mình. Have fun! ;)&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/laravel/xoa-cache-view-trong-laravel-4-voi-artisan-command&quot;&gt;Xóa cache views trong laravel 4 với Artisan command&lt;/a&gt; was originally published by Ta Ly at &lt;a href=&quot;&quot;&gt;THAPSANG.NET&lt;/a&gt; on October 03, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Hướng dẫn cài đặt Laravel 4]]></title>
  <link>/laravel/huong-dan-cai-dat-laravel</link>
  <id>/laravel/huong-dan-cai-dat-laravel</id>
  <published>2014-09-27T00:00:00+07:00</published>
  <updated>2014-09-27T00:00:00+07:00</updated>
  <author>
    <name>Ta Ly</name>
    <uri></uri>
    <email>taly2808@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;Có nhiều cách để cài đặt Laravel. Trong bài viết này, tôi sẽ trình bày các cách cài đặt Laravel trên Linux và trên Windows từ mọi thứ mà Laravel yêu cầu. Bạn sẽ biết cài đặt PHP, MySQL, MCrypt, Composer và mọi thứ để ứng dụng của bạn có thể chạy :).&lt;/p&gt;

&lt;section&gt;
  &lt;header&gt;
    &lt;h2&gt;Nội dung&lt;/h2&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#system-requirements&quot;&gt;System Requirements&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#install-php&quot;&gt;Install PHP&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#using-lampp-or-xampp&quot;&gt;Using LAMPP or XAMPP&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#from-scratch&quot;&gt;From Scratch&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#install-composer&quot;&gt;Install Composer&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#install-laravel&quot;&gt;Install Laravel&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#via-composer&quot;&gt;Via Composer&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#via-laravel-installer&quot;&gt;Via Laravel Installer&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#run-your-fisrt-app&quot;&gt;Run your fisrt app&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/section&gt;

&lt;h2 id=&quot;system-requirements&quot;&gt;System Requirements&lt;/h2&gt;

&lt;p&gt;Để chạy được Laravel, chúng ta cần:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;PHP &amp;gt;= 5.4 (phiên bản 5.4 hoặc mới hơn)&lt;/li&gt;
  &lt;li&gt;MCrypt PHP Extension&lt;/li&gt;
  &lt;li&gt;Composer&lt;/li&gt;
  &lt;li&gt;Laravel&lt;/li&gt;
  &lt;li&gt;Openssl phải được enabled trong file &lt;code&gt;php.ini&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;install-php&quot;&gt;Install PHP&lt;/h2&gt;

&lt;p&gt;Trước hết, bạn kiểm tra PHP đã được cài đặt trên máy hay chưa với lệnh:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;php -v&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Nếu kết quả hiển thị như dưới đây, tức là bạn đã cài đặt thành công PHP trên máy tính và bạn có thể bỏ qua phần cài đặt PHP này.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;PHP 5.5.11 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;cli&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;built: Apr  &lt;span class=&quot;m&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2014&lt;/span&gt; 15:07:14&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Copyright &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;c&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 1997-2014 The PHP Group
Zend Engine v2.5.0, Copyright &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;c&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 1998-2014 Zend Technologies&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Nếu phiên bản PHP của bạn nhỏ hơn 5.4 hoặc không có phiên bản nào, bạn cần phải cài đặt PHP. Bạn có thể lựa chọn cài đặt đủ bộ AMP (Apache + MySQL + PHP) bằng cách cài đặt LAMPP (cho Linux) hoặc XAMPP (cho Windows). Hoặc bạn có thể cài trực tiếp các thành phần riêng lẻ.&lt;/p&gt;

&lt;h3 id=&quot;using-lampp-or-xampp&quot;&gt;Using LAMPP or XAMPP&lt;/h3&gt;

&lt;p&gt;Nếu bạn ngại phải cài đặt từng thứ rời rạc, và lo ngại không biết mình có cài đặt và cấu hình đúng không, bạn có thể cài đặt XAMPP để có môi trường đã được tích hợp đầy đủ PHP, Apache2, MySQL, Perl với phiên bản mới nhất. Và một điều rất tuyệt nữa đó là &lt;strong&gt;MCrypt&lt;/strong&gt; đã có sẵn trong XAMPP, do đó bạn không còn phải lo lắng về nó nữa.&lt;strong&gt;Nếu bạn dùng Windows, tôi khuyến nghị bạn nên cài đặt PHP theo cách này&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Để cài đặt XAMPP, bạn cần download &lt;a href=&quot;https://www.apachefriends.org/download.html&quot;&gt;XAMPP&lt;/a&gt; phiên bản phù hợp với máy tính của bạn về. Sauu đó tiến hành cài đặt lên máy tính của bạn.&lt;/p&gt;

&lt;p&gt;Sau khi hoàn tất, XAMPP được cài đặt vào trong thư mục &lt;strong&gt;/opt/lampp&lt;/strong&gt; với Linux, và trong thư mục C:\xampp trên Windows (nếu bạn chọn ổ C khi cài đặt). Bạn chạy lại lệnh &lt;code&gt;php -v&lt;/code&gt; để kiểm tra kết quả.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Trên Windows, nếu bạn đã cài đặt XAMPP mà vẫn bị báo lỗi không có phiên bản, bạn cần thiết lập &lt;strong&gt;PATH&lt;/strong&gt; với lệnh &lt;code&gt;set PATH=%PATH%;C:\path\to\php&lt;/code&gt; trong đó &lt;code&gt;\path\to\php&lt;/code&gt; là đường dẫn đến thư mục chứa file &lt;code&gt;php.exe&lt;/code&gt;. Giả sử, bạn sử dụng xampp, khi đó bạn nhập vào dòng lệnh sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;C:&lt;span class=&quot;se&quot;&gt;\&amp;gt;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;%PATH%&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;C:&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;ampp&lt;span class=&quot;se&quot;&gt;\p&lt;/span&gt;hp&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Sau khi cài đặt XAMPP, bạn cần &lt;strong&gt;Enable OpenSSL&lt;/strong&gt; bằng cách mở file &lt;code&gt;php.ini&lt;/code&gt; (tại thư mục C:/xampp/php), tìm: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;extension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;php_openssl.dll&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;và bỏ dấu &lt;code&gt;;&lt;/code&gt; phía trước, khi đó, trông nó thế này:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;extension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;php_openssl.dll&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Okay, bây giờ thì restart Apache.&lt;/p&gt;

&lt;h3 id=&quot;from-scratch&quot;&gt;From Scratch&lt;/h3&gt;
&lt;p&gt;(Sử dụng cho Linux).&lt;/p&gt;

&lt;p&gt;Nhập vào Terminal các lệnh sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sudo apt-get update
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sudo apt-get install php5-common libapache2-mod-php5 php5-cli&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Sau đó, bạn chạy lại lệnh &lt;code&gt;php -v&lt;/code&gt; để kiểm tra phiên bản PHP.&lt;/p&gt;

&lt;h2 id=&quot;install-composer&quot;&gt;Install Composer&lt;/h2&gt;

&lt;p&gt;Laravel sử dụng &lt;a href=&quot;http://getcomposer.org/&quot;&gt;Composer&lt;/a&gt; để quản lý các thư viện phụ thuộc. Bạn tham khảo bài viết &lt;a href=&quot;/laravel/huong-dan-cai-dat-composer&quot;&gt;hướng dẫn cài đặt Composer&lt;/a&gt; để có thể cài đặt Composer. Tôi khuyến nghị bạn nên cài đặt Composer sử dụng cho toàn hệ thống (globally). &lt;/p&gt;

&lt;p&gt;Bạn có thể kiểm tra Composer đã được cài đặt hay chưa bằng cách mở Terminal và chạy lệnh sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;composer --version
Composer version b33da336ecb7f1c9b15a57285e5a9f09cf5f3dd2 2014-09-30 15:28:01&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Nếu kết quả hiển thị như trên thì chắc chắn bạn đã cài composer thành công trên máy tính của mình.&lt;/p&gt;

&lt;h2 id=&quot;install-laravel&quot;&gt;Install Laravel&lt;/h2&gt;

&lt;p&gt;Bạn có thể cài đặt Laravel bằng 1 trong 2 cách dưới đây:&lt;/p&gt;

&lt;h3 id=&quot;via-composer&quot;&gt;Via Composer&lt;/h3&gt;

&lt;p&gt;(Khuyến nghị bạn nên sử dụng cách này).&lt;/p&gt;

&lt;p&gt;Nếu bạn dùng XAMPP, bạn cần di chuyển bằng command line đến thư mục webroot ( &lt;code&gt;/opt/lampp/htdocs&lt;/code&gt; trên Linux và &lt;code&gt;C:\xampp\htdocs&lt;/code&gt; trên Windows). Bạn muốn tạo mới một project có tên &lt;strong&gt;test_laravel&lt;/strong&gt;, bạn nhập vào Terminal (trình command line trên Windows) như sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /opt/lampp/htdocs
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;composer create-project laravel/laravel test_laravel --prefer-dist&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Trên Windows sẽ thế này:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;C:&lt;span class=&quot;se&quot;&gt;\&amp;gt;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;xampp&lt;span class=&quot;se&quot;&gt;\h&lt;/span&gt;tdocs
C:&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;ampp&lt;span class=&quot;se&quot;&gt;\h&lt;/span&gt;tdocs&amp;gt; composer create-project laravel/laravel test_laravel --prefer-dist&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Composer sẽ tự động tạo project cho bạn, và bạn chỉ cần ngồi đợi thông báo &lt;strong&gt;successfull&lt;/strong&gt; thôi.&lt;/p&gt;

&lt;h3 id=&quot;via-laravel-installer&quot;&gt;Via Laravel Installer&lt;/h3&gt;

&lt;p&gt;Trước tiên, bạn cần download Laravel Installer. Có 2 cách:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Cách 1: Sử dụng Composer. Nhập vào Terminal lệnh sau:&lt;/p&gt;

  &lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&amp;gt; composer global require &lt;span class=&quot;s2&quot;&gt;&amp;quot;laravel/installer=~1.1&amp;quot;&lt;/span&gt;
&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;Cách 2: Download &lt;a href=&quot;http://laravel.com/laravel.phar&quot;&gt;Laravel Installer&lt;/a&gt; , đổi tên thành &lt;code&gt;laravel&lt;/code&gt;.
Tiếp đến, copy file &lt;code&gt;laravel&lt;/code&gt; sang thư mục &lt;code&gt;/urs/local/bin&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Tạo project &lt;strong&gt;test_laravel&lt;/strong&gt; bằng câu lệnh:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;laravel new test_laravel&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Sau khi tạo xong project, bạn cần cấp quyền ghi cho web server vào thư mục &lt;code&gt;app/storage&lt;/code&gt;. Nếu bạn dùng Linux, bạn di chuyển đến thư mục chứa project và sử dụng lệnh sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sudo chmod -R &lt;span class=&quot;m&quot;&gt;777&lt;/span&gt; app/storage&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;run-your-fisrt-app&quot;&gt;Run your fisrt app&lt;/h2&gt;

&lt;p&gt;Bạn đã có project, bạn cần khởi động nó bằng cách sử dụng Artisan - một command line interface của Laravel. Đơn giản là bạn chỉ cần di chuyển đến project:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;test_laravel&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;và thực thi lệnh: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;php artisan server&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Bạn sẽ thấy kết quả: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;Laravel development server started on http://localhost:8000&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Mở trình duyệt web và gõ vào địa chỉ &lt;code&gt;http://localhost:8000&lt;/code&gt;, tận hưởng thành quả nào:&lt;/p&gt;
&lt;figure&gt;
	&lt;a href=&quot;/assets/img/welcome_laravel.jpg&quot;&gt;&lt;img src=&quot;/assets/img/welcome_laravel.jpg&quot; /&gt;&lt;/a&gt;
&lt;/figure&gt;

  &lt;p&gt;&lt;a href=&quot;/laravel/huong-dan-cai-dat-laravel&quot;&gt;Hướng dẫn cài đặt Laravel 4&lt;/a&gt; was originally published by Ta Ly at &lt;a href=&quot;&quot;&gt;THAPSANG.NET&lt;/a&gt; on September 27, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Hướng dẫn cài đặt Composer]]></title>
  <link>/laravel/huong-dan-cai-dat-composer</link>
  <id>/laravel/huong-dan-cai-dat-composer</id>
  <published>2014-09-24T00:00:00+07:00</published>
  <updated>2014-09-24T00:00:00+07:00</updated>
  <author>
    <name>Ta Ly</name>
    <uri></uri>
    <email>taly2808@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;Composer là một công cụ để quản lý sự phụ thuộc trong PHP. Bạn có một project và nó phụ thuộc vào một cơ số các thư viện. Một vài thư viện trong số đó lại phụ thuộc vào các thư viện khác. Việc tải các thư viện cần thiết cho project theo cách thông thường cũng khá tốn thời gian và mệt não. Với Composer, bạn chỉ cần khai báo các thư viện project cần, Composer sẽ tìm các phiên bản tương ứng và download chúng vào vào trong project cho bạn.&lt;/p&gt;

&lt;section&gt;
  &lt;header&gt;
    &lt;h2&gt;Nội dung&lt;/h2&gt;
  &lt;/header&gt;
&lt;div id=&quot;drawer&quot;&gt;
&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#khai-bo-ph-thuc&quot;&gt;Khai báo phụ thuộc&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#system-requirements&quot;&gt;System Requirements&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ci-t&quot;&gt;Cài đặt&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#ci-t-trn-linux&quot;&gt;Cài đặt trên Linux&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#locally&quot;&gt;Locally&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#globally&quot;&gt;Globally&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ci-t-trn-windows&quot;&gt;Cài đặt trên Windows&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#using-the-installer&quot;&gt;Using the Installer&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#manual-installation&quot;&gt;Manual Installation&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

  &lt;/div&gt;
&lt;/section&gt;

&lt;h2 id=&quot;khai-bo-ph-thuc&quot;&gt;Khai báo phụ thuộc&lt;/h2&gt;

&lt;p&gt;Giả sử, bạn có một dự án và bạn cần thư viện để ghi log. Bạn có thể sử dụng &lt;a href=&quot;https://github.com/Seldaek/monolog&quot;&gt;monolog&lt;/a&gt; hoặc &lt;a href=&quot;http://logging.apache.org/log4php/&quot;&gt;log4php&lt;/a&gt;. Giả như bạn quyết định sử dụng &lt;strong&gt;monolog&lt;/strong&gt;. Để thêm thư viện &lt;strong&gt;monolog&lt;/strong&gt; vào trong project, bạn chỉ cần tạo một file &lt;code&gt;composer.json&lt;/code&gt; và liệt kê thư viện phụ thuộc vào đó: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-json&quot; data-lang=&quot;json&quot;&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;quot;require&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;quot;monolog/monolog&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;1.2.*&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Với khai báo như trên, chúng ta nói rằng chúng ta yêu cầu một số gói monolog/monolog của bất kỳ phiên bản nào bắt đầu  bằng 1.2. Composer sẽ tự động tải về và đặt nó trong thư mục &lt;strong&gt;your-project/vendor/&lt;/strong&gt;.&lt;/p&gt;

&lt;h2 id=&quot;system-requirements&quot;&gt;System Requirements&lt;/h2&gt;

&lt;p&gt;Composer yêu cầu máy tính của bạn phải có PHP phiên bản 5.3.2 trở lên. Bạn có thể kiểm tra phiên bản PHP trên máy bằng lệnh &lt;strong&gt;&lt;code&gt;php -v&lt;/code&gt;&lt;/strong&gt; hoặc &lt;strong&gt;&lt;code&gt;php --version&lt;/code&gt;&lt;/strong&gt; như sau: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;php -v
PHP 5.5.14-2+deb.sury.org~precise+1 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;cli&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;built: Jul  &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2014&lt;/span&gt; 11:56:23&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 
Copyright &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;c&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 1997-2014 The PHP Group
Zend Engine v2.5.0, Copyright &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;c&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 1998-2014 Zend Technologies
    with Zend OPcache v7.0.4-dev, Copyright &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;c&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 1999-2014, by Zend Technologies&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Nếu kết quả của bạn không tương tự như trên, bạn cần cài đặt PHP trên máy hoặc nâng cấp phiên bản nếu phiên bản của bạn nhỏ hơn 5.3.2.&lt;/p&gt;

&lt;p&gt;Nếu bạn dùng Windows và bạn gặp phải lỗi:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;C:&lt;span class=&quot;se&quot;&gt;\&amp;gt;&lt;/span&gt;php --version
&lt;span class=&quot;s1&quot;&gt;&amp;#39;php&amp;#39;&lt;/span&gt; is not recognized as an internal or external &lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt;,
operable program or batch file.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Khi đó, bạn cần thiết lập &lt;strong&gt;PATH&lt;/strong&gt; với lệnh &lt;code&gt;set PATH=%PATH%;C:\path\to\php&lt;/code&gt; trong đó &lt;code&gt;\path\to\php&lt;/code&gt; là đường dẫn đến thư mục chứa file &lt;code&gt;php.exe&lt;/code&gt;. Giả sử, bạn sử dụng xampp, khi đó bạn nhập vào dòng lệnh sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;C:&lt;span class=&quot;se&quot;&gt;\&amp;gt;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;set &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;%PATH%&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;C:&lt;span class=&quot;se&quot;&gt;\x&lt;/span&gt;ampp&lt;span class=&quot;se&quot;&gt;\p&lt;/span&gt;hp&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Kiểm tra kết quả:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;C:&lt;span class=&quot;se&quot;&gt;\&amp;gt;&lt;/span&gt;php -v
PHP 5.5.11 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;cli&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;built: Apr  &lt;span class=&quot;m&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2014&lt;/span&gt; 15:07:14&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Copyright &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;c&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 1997-2014 The PHP Group
Zend Engine v2.5.0, Copyright &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;c&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; 1998-2014 Zend Technologies&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2 id=&quot;ci-t&quot;&gt;Cài đặt&lt;/h2&gt;

&lt;p&gt;Trong bài viết này, tôi hướng dẫn cả 2 phương thức cài đặt locally và globally. Nhưng tôi khuyến nghị bạn nên tiến hành cài đặt theo phương thức &lt;strong&gt;Globally&lt;/strong&gt; trên Linux và sử dụng &lt;strong&gt;Installer&lt;/strong&gt; trên Windows.&lt;/p&gt;

&lt;h3 id=&quot;ci-t-trn-linux&quot;&gt;Cài đặt trên Linux&lt;/h3&gt;

&lt;p&gt;Để cài đặt Composer trên Linux (tôi sử dụng Ubuntu), máy tính của bạn cần có sẵn phần mềm &lt;strong&gt;curl&lt;/strong&gt;. Bạn kiểm tra phần mềm đã được cài đặt hay chưa bằng lệnh: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;curl --version
curl 7.22.0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;i686-pc-linux-gnu&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3
Protocols: dict file ftp ftps gopher http https imap imaps ldap pop3 pop3s rtmp rtsp smtp smtps telnet tftp 
Features: GSS-Negotiate IDN IPv6 Largefile NTLM NTLM_WB SSL libz TLS-SRP&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Nếu kết quả hiển thị phiên bản của curl như trên thì máy bạn đã được cài đặt. Nếu không, bạn dễ dàng cài đặt &lt;strong&gt;curl&lt;/strong&gt; bằng lệnh sau: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sudo apt-get install curl&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&quot;locally&quot;&gt;Locally&lt;/h4&gt;

&lt;p&gt;Với phương thức này bạn sẽ cài đặt composer cho từng dự án của bạn. Bạn di chuyển đến thư mục chứa project, nhập vào dòng lệnh sau vào Terminal:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;curl -sS https://getcomposer.org/installer &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; php&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Nếu lệnh trên bị lỗi, bạn có thể thay thế bằng lệnh: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;php -r &lt;span class=&quot;s2&quot;&gt;&amp;quot;readfile(&amp;#39;https://getcomposer.org/installer&amp;#39;);&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; php&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Máy tính sẽ kiểm tra cấu hình PHP và sau đó sẽ download &lt;strong&gt;composer.phar&lt;/strong&gt; về thư mục project của bạn.&lt;/p&gt;

&lt;p&gt;Bạn cũng có thể cài đặt Composer vào một thư mục cụ thể bằng cách sử dụng option &lt;strong&gt;&lt;code&gt;--install-dir&lt;/code&gt;&lt;/strong&gt; và cung cấp đường dẫn tới thư mục đích cho nó (có thể là đường dẫn tương đối hoặc tuyệt đối đều được):&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;curl -sS https://getcomposer.org/installer &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; php -- --install-dir&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;bin&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Sau đó, bạn chỉ cần chạy &lt;strong&gt;&lt;code&gt;php composer.phar&lt;/code&gt;&lt;/strong&gt; để chạy Composer.&lt;/p&gt;

&lt;h4 id=&quot;globally&quot;&gt;Globally&lt;/h4&gt;

&lt;p&gt;Bạn có thể đặt file &lt;strong&gt;composer.phar&lt;/strong&gt; ở bất cứ đâu. Và nếu bạn đặt nó trong đường dẫn của bạn thì bạn có thể truy cập nó như là biến toàn cục. Để download &lt;strong&gt;composer.phar&lt;/strong&gt; về máy (đặt bất cứ đâu bạn muốn), bạn chạy các lệnh sau:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;curl -sS https://getcomposer.org/installer &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; php
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sudo mv composer.phar /usr/local/bin/composer&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Sau đó, bạn chỉ cần chạy &lt;strong&gt;&lt;code&gt;composer&lt;/code&gt;&lt;/strong&gt; thay vì phải chạy &lt;strong&gt;&lt;code&gt;php composer.phar&lt;/code&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;h3 id=&quot;ci-t-trn-windows&quot;&gt;Cài đặt trên Windows&lt;/h3&gt;

&lt;h4 id=&quot;using-the-installer&quot;&gt;Using the Installer&lt;/h4&gt;

&lt;p&gt;Đây là cách dễ nhất để bạn cài đặt Composer về máy. Bạn chỉ cần download và chạy file &lt;a href=&quot;https://getcomposer.org/Composer-Setup.exe&quot;&gt;Composer-Setup.exe&lt;/a&gt;. Nó sẽ tự động cài đặt phiên bản Composer mới nhất và thiết lập &lt;strong&gt;PATH&lt;/strong&gt; cho bạn. Giờ đây, bạn có thể chạy lệnh &lt;strong&gt;&lt;code&gt;composer&lt;/code&gt;&lt;/strong&gt; từ bất cứ thư mục nào bằng command line.&lt;/p&gt;

&lt;h4 id=&quot;manual-installation&quot;&gt;Manual Installation&lt;/h4&gt;

&lt;p&gt;Thay đổi đến thư mục bạn muốn và chạy các lệnh sau để download composer.phar:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;C:&lt;span class=&quot;se&quot;&gt;\U&lt;/span&gt;sers&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;sername&amp;gt;cd C:&lt;span class=&quot;se&quot;&gt;\b&lt;/span&gt;in
C:&lt;span class=&quot;se&quot;&gt;\b&lt;/span&gt;in&amp;gt;php -r &lt;span class=&quot;s2&quot;&gt;&amp;quot;readfile(&amp;#39;https://getcomposer.org/installer&amp;#39;);&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; php&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Lưu ý:&lt;/strong&gt; Nếu câu lệnh trên bị lỗi, bạn thay thế &lt;strong&gt;https&lt;/strong&gt; bằng &lt;strong&gt;http&lt;/strong&gt; hoặc enable &lt;strong&gt;php_openssl.dll&lt;/strong&gt; trong file &lt;strong&gt;php.ini&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Tiếp đến, bạn tạo file &lt;strong&gt;&lt;code&gt;composer.bat&lt;/code&gt;&lt;/strong&gt; ngang hàng với file &lt;strong&gt;&lt;code&gt;composer.phar&lt;/code&gt;&lt;/strong&gt; bằng lệnh sau: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;C:&lt;span class=&quot;se&quot;&gt;\b&lt;/span&gt;in&amp;gt;echo @php &lt;span class=&quot;s2&quot;&gt;&amp;quot;%~dp0composer.phar&amp;quot;&lt;/span&gt; %*&amp;gt;composer.bat&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Sau khi cài đặt xong, để kiểm tra việc cài đặt composer, bạn đóng cửa sổ Ternimal hiện tại lại, mở một cửa sổ terminal mới: &lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;C:&lt;span class=&quot;se&quot;&gt;\U&lt;/span&gt;sers&lt;span class=&quot;se&quot;&gt;\u&lt;/span&gt;sername&amp;gt;composer --version
Composer version b33da336ecb7f1c9b15a57285e5a9f09cf5f3dd2 2014-09-30 15:28:01&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Với kết quả hiển thị như trên, bạn đã cài đặt thành công Composer trên máy tính của mình.&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/laravel/huong-dan-cai-dat-composer&quot;&gt;Hướng dẫn cài đặt Composer&lt;/a&gt; was originally published by Ta Ly at &lt;a href=&quot;&quot;&gt;THAPSANG.NET&lt;/a&gt; on September 24, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Kiểm tra kết nối database với CodeIgniter]]></title>
  <link>/codeigniter/kiem-tra-ket-noi-database-voi-codeigniter</link>
  <id>/codeigniter/kiem-tra-ket-noi-database-voi-codeigniter</id>
  <published>2014-09-23T00:00:00+07:00</published>
  <updated>2014-09-23T00:00:00+07:00</updated>
  <author>
    <name>Ta Ly</name>
    <uri></uri>
    <email>taly2808@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;Khi làm việc với Model cần kết nối đến database, tôi gặp phải thông báo lỗi sau: (Tôi đang sử dụng CodeIgniter 2.2.0, Apache/2.4.9 (Unix), PHP/5.5.11, MySQL/5.0.1):&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;A Database Error Occurred

Unable to connect to your database server using the provided settings.

Filename: core/Loader.php

Line Number: 346&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Và đây là thông số cấu hình database trong &lt;strong&gt;/application/config/database.php&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;lineno&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 2&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;hostname&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;localhost&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 3&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;username&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;root&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 4&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;password&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;mypasword&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 5&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;database&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;db_codeigniter_test&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 6&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;dbdriver&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;mysql&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 7&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;dbprefix&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 8&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;pconnect&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 9&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;db_debug&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;cache_on&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;11&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;cachedir&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;char_set&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;utf8&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;13&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;dbcollat&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;utf8_general_ci&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;14&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;swap_pre&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;15&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;autoinit&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;16&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;stricton&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Để kiểm tra có kết nối được tới database hay không, ta cần thêm đoạn code sau phía dưới cùng của file &lt;strong&gt;/application/config/database.php&lt;/strong&gt; và xem kết quả:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-php&quot; data-lang=&quot;php&quot;&gt;&lt;span class=&quot;lineno&quot;&gt; 1&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 2&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;lt;pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 3&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;print_r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 4&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;lt;/pre&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 5&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;Connecting to database: &amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;database&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 6&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$dbh&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;mysql_connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 7&lt;/span&gt;     &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;hostname&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 8&lt;/span&gt;     &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;username&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt; 9&lt;/span&gt;     &lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;password&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;10&lt;/span&gt;     &lt;span class=&quot;k&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;die&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;Cannot connect to the database because: &amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;mysql_error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;11&lt;/span&gt;     &lt;span class=&quot;nb&quot;&gt;mysql_select_db&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$db&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;default&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;database&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;12&lt;/span&gt; 
&lt;span class=&quot;lineno&quot;&gt;13&lt;/span&gt;     &lt;span class=&quot;k&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;lt;br /&amp;gt;   Connected OK:&amp;#39;&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;lineno&quot;&gt;14&lt;/span&gt;     &lt;span class=&quot;k&quot;&gt;die&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;file: &amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;__FILE__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39; Line: &amp;#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;__LINE__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Nếu bạn gặp cảnh báo &lt;strong&gt;The mysql extension is deprecated and will be removed in the future: use mysqli or PDO instead&lt;/strong&gt;, để loại bỏ thông báo này, bạn có thể thêm &lt;code&gt;error_reporting(E_ALL ^ E_DEPRECATED);&lt;/code&gt; vào đầu file &lt;strong&gt;/application/config/database.php&lt;/strong&gt; hoặc chỉnh sửa giá trị của &lt;strong&gt;error_reporting&lt;/strong&gt; trong file &lt;strong&gt;php.ini&lt;/strong&gt;.
Xem thêm tại &lt;a href=&quot;http://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli&quot;&gt;http://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Nếu bạn gặp thông báo lỗi: &lt;strong&gt;mysql_connect(): No such file or directory&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Server không kết nối được tới database bởi vì file &lt;strong&gt;socket&lt;/strong&gt; chưa chính xác. File &lt;strong&gt;socket&lt;/strong&gt; của bạn có thể nằm ở &lt;strong&gt;/var/mysql/mysql.sock&lt;/strong&gt; hoặc &lt;strong&gt;/tmp/mysql.sock&lt;/strong&gt; (nếu bạn cài lampp hoặc xampp, nó sẽ là &lt;strong&gt;/opt/lampp/var/mysql/mysql.sock&lt;/strong&gt;), tuy nhiên có thể PHP tìm kiếm sai vị trí.
Để giải quyết lỗi này, ta làm như sau:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Xem thông tin phpinfo(): nếu bạn cài lampp hoặc xampp thì có thể xem thông tin phpinfo() bằng cách nhập vào trình duyệt địa chỉ: &lt;a href=&quot;http://localhost/xampp/phpinfo.php&quot;&gt;http://localhost/xampp/phpinfo.php&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Tìm kiếm &lt;strong&gt;mysql.default_socket&lt;/strong&gt; hoặc &lt;strong&gt;pdo_mysql.default_socket&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Mở tập tin &lt;strong&gt;my.ini&lt;/strong&gt; (nếu sử dụng xampp) hoặc &lt;strong&gt;my.cnf&lt;/strong&gt; (nếu sử dụng lampp) và tìm kiếm giá trị của socket, ví dụ 	&lt;strong&gt;socket = /opt/lampp/var/mysql/mysql.sock&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Mở tập tin &lt;strong&gt;php.ini&lt;/strong&gt; (bạn có thể xem địa chỉ chứa file php.ini trên trang thông tin phpinfo hoặc sử dụng lệnh &lt;em&gt;locate php.ini&lt;/em&gt;) và thay thế tất cả các địa chỉ không chính xác bằng địa chỉ chính xác từ MySQL.&lt;/li&gt;
  &lt;li&gt;Restart Apache.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Nguồn tham khảo: &lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/12584762/mysql-connect-no-such-file-or-directory&quot;&gt;http://stackoverflow.com/questions/12584762/mysql-connect-no-such-file-or-directory&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://stackoverflow.com/questions/4219970/warning-mysql-connect-2002-no-such-file-or-directory-trying-to-connect-vi&quot;&gt;http://stackoverflow.com/questions/4219970/warning-mysql-connect-2002-no-such-file-or-directory-trying-to-connect-vi&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

  &lt;p&gt;&lt;a href=&quot;/codeigniter/kiem-tra-ket-noi-database-voi-codeigniter&quot;&gt;Kiểm tra kết nối database với CodeIgniter&lt;/a&gt; was originally published by Ta Ly at &lt;a href=&quot;&quot;&gt;THAPSANG.NET&lt;/a&gt; on September 23, 2014.&lt;/p&gt;</content>
</entry>


<entry>
  <title type="html"><![CDATA[Tạo view calendar trong Drupal 7]]></title>
  <link>/drupal-7/tao-view-calendar-trong-drupal7</link>
  <id>/drupal-7/tao-view-calendar-trong-drupal7</id>
  <published>2014-04-14T00:00:00+07:00</published>
  <updated>2014-04-14T00:00:00+07:00</updated>
  <author>
    <name>Ta Ly</name>
    <uri></uri>
    <email>taly2808@gmail.com</email>
  </author>
  <content type="html">&lt;p&gt;Trong dự án đang thực hiện, tôi cần hiển thị lịch học của các khóa học dưới dạng lịch (calendar) để mọi người có cái nhìn trực quan hơn. Trang tôi muốn hiển thị là trang &lt;a href=&quot;http://buocnho.com/dao-tao&quot; target=&quot;_blank&quot;&gt;Đào tạo&lt;/a&gt;. Các khóa học có kiểu nội dung là &lt;strong&gt;Course&lt;/strong&gt; và có trường &lt;strong&gt;Dự kiến khai giảng&lt;/strong&gt; (&lt;code&gt;field_course_start_date&lt;/code&gt;) là kiểu ngày tháng (date). Đã có nhiều plugin jquery hỗ trợ việc hiển thị Calendar, nhưng làm thế nào để tôi có thể sử dụng chúng trong Drupal 7?&lt;/p&gt;

&lt;p&gt;Để giải quyết vấn đề này, tôi sử dụng &lt;a href=&quot;http://drupal.org/project/views&quot; target=&quot;_blank&quot;&gt;Views&lt;/a&gt; dựa trên module &lt;a href=&quot;http://drupal.org/project/calendar&quot; target=&quot;_blank&quot;&gt;Calendar&lt;/a&gt;) của drupal để tạo ra một trang với những truy vấn phù hợp với mục đích hiển thị của tôi.&lt;/p&gt;

&lt;h2 id=&quot;thc-hin&quot;&gt;Thực hiện&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;Bạn cần cài đặt các modules sau: &lt;a href=&quot;https://drupal.org/project/ctools&quot; target=&quot;_blank&quot;&gt;CTools&lt;/a&gt;, &lt;a href=&quot;https://drupal.org/project/views&quot; target=&quot;_blank&quot;&gt;Views&lt;/a&gt;, &lt;a href=&quot;https://drupal.org/project/date&quot; target=&quot;_blank&quot;&gt;Date&lt;/a&gt;, &lt;a href=&quot;https://drupal.org/project/calendar&quot; target=&quot;_blank&quot;&gt;Calendar&lt;/a&gt;.
 &lt;em&gt;Lưu ý&lt;/em&gt;: khi cài đặt các module trên, bạn cần enable cả Date API và Date Views.&lt;/li&gt;
  &lt;li&gt;Tạo view từ template: bạn truy cập vào Structure &amp;gt; Views &amp;gt; Add view from template.
 &lt;img src=&quot;/assets/img/add-view-from-template.png&quot; alt=&quot;Tạo view từ template&quot; /&gt;&lt;/li&gt;
  &lt;li&gt;Khi đó, bạn sẽ nhìn thấy nhiều loại Views mặc định mà bạn có thể thêm vào.
    &lt;ul&gt;
      &lt;li&gt;Click vào &lt;strong&gt;add&lt;/strong&gt; ở phía cuối hàng “&lt;em&gt;A calendar view of the ‘field_course_start_date’ field in the ‘node’ base table.&lt;/em&gt;”.
  &lt;img src=&quot;/assets/img/add-field-course-start-date.png&quot; alt=&quot;Tạo view từ template&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Nhập vào tên View mà bạn muốn hiển thị, sau đó click &lt;strong&gt;Continue&lt;/strong&gt;.
 &lt;img src=&quot;/assets/img/enter-view-name-calendar.png&quot; alt=&quot;Nhập vào tên View Calendar&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Bạn kéo xuống cuối trang để xem preview của view, bạn sẽ thấy view calendar với nội dung được hiển thị phía trong.
 &lt;img src=&quot;/assets/img/preview-calendar-view.png&quot; alt=&quot;Preview&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Kéo trở lên,  chúng ta cần thay đổi phần cấu hình &lt;strong&gt;FILTER CRITERIA&lt;/strong&gt; để view của chúng ta chỉ hiển thị nội dung có content type là &lt;strong&gt;Course&lt;/strong&gt;:
        &lt;ul&gt;
          &lt;li&gt;Click vào nút Add.
  &lt;img src=&quot;/assets/img/add-filter-criteria.png&quot; alt=&quot;Add Filter Criteria&quot; /&gt;&lt;/li&gt;
          &lt;li&gt;Chọn &lt;em&gt;Content: Type&lt;/em&gt;.&lt;/li&gt;
          &lt;li&gt;Click Apply (all displays).&lt;/li&gt;
          &lt;li&gt;Chọn “Is one of” và sau tích chọn “&lt;em&gt;Course&lt;/em&gt;”.
  &lt;img src=&quot;/assets/img/config-filter-criteria-type.png&quot; alt=&quot;Cấu hình cho Filter Criteria&quot; /&gt;&lt;/li&gt;
          &lt;li&gt;Click Apply (all displays).
 Khi đó, &lt;em&gt;Filter Criteria&lt;/em&gt; sẽ như hình.
 &lt;img src=&quot;/assets/img/filter-criteria-after.png&quot; alt=&quot;Filter Criteria&quot; /&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;Tiếp đến, chúng ta chỉnh sửa &lt;strong&gt;Contextual Filters&lt;/strong&gt; trong phần &lt;strong&gt;Advanced&lt;/strong&gt; ở cột bên phải.
 &lt;img src=&quot;/assets/img/contextual-filters.png&quot; alt=&quot;Cấu hình Contextual Filters&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Click &lt;em&gt;Date: Date (node) (Content: Dự kiến khai giảng (field_course_start_date))&lt;/em&gt;.&lt;/li&gt;
      &lt;li&gt;Ở phía trên của cửa sổ, bạn cần đảm bảo rằng mình đang cấu hình cho lựa chọn tất cả các hiển thị (All displays).&lt;/li&gt;
      &lt;li&gt;Check chọn &lt;em&gt;Content: Dự kiến khai giảng (field_course_start_date)&lt;/em&gt; và click &lt;em&gt;Apply (all displays)&lt;/em&gt;.
 &lt;img src=&quot;/assets/img/config-contextual-filters.png&quot; alt=&quot;Contextual Filters&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Kiểm tra lại Preview của View.&lt;/li&gt;
      &lt;li&gt;Lưu lại  cấu hình của View.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Cấu hình đường dẫn của View để hiển thị ngoài trang web.
    &lt;ul&gt;
      &lt;li&gt;Đường dẫn mặc định của View được thể hiện trong phần cấu hình &lt;em&gt;Path&lt;/em&gt; của cột &lt;strong&gt;PAGE SETTINGS&lt;/strong&gt;. Bạn click vào đường dẫn đó để thay đổi tên đường dẫn mà bạn muốn. Sau đó lưu các thiết lập đó lại.
 &lt;img src=&quot;/assets/img/page-calendar-setting.png&quot; alt=&quot;Thiết lập đường dẫn cho trang hiển thị view calendar&quot; /&gt;&lt;/li&gt;
      &lt;li&gt;Nếu bạn thay đổi đường dẫn thì cũng nhớ thay đổi cho các hiển thị theo Week, Day, Year nữa.	&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Kiểm tra hiển thị ngoài trang web
 Giả sử, tôi thay đổi đường dẫn từ &lt;strong&gt;calendar-node-field-course-start-date&lt;/strong&gt; thành &lt;strong&gt;dao-tao&lt;/strong&gt;. Khi đó, trên thanh địa chỉ trình duyệt, tôi nhập vào như sau: &lt;em&gt;http://localhost/drupal/dao-tao&lt;/em&gt; và kiểm tra kết quả thôi.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;xem-thm&quot;&gt;Xem thêm&lt;/h2&gt;

&lt;p&gt;Nếu bạn gặp lỗi &lt;strong&gt;Warning: Illegal string offset ‘data’ in template_preprocess_calendar_month() (line 38 of modules/calendar/theme/theme.inc)&lt;/strong&gt; khi hiển thị nội dung của view calendar, bạn làm như sau:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Mở file &lt;strong&gt;sites/all/modules/calendar/theme/theme.inc&lt;/strong&gt;.&lt;/li&gt;
  &lt;li&gt;Thêm đoạn code sau ngay dưới dòng 37: &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;&lt;span class=&quot;nt&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;isset&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;($&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;data&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Lưu file, xóa cache và mở lại trang.&lt;/li&gt;
&lt;/ul&gt;


  &lt;p&gt;&lt;a href=&quot;/drupal-7/tao-view-calendar-trong-drupal7&quot;&gt;Tạo view calendar trong Drupal 7&lt;/a&gt; was originally published by Ta Ly at &lt;a href=&quot;&quot;&gt;THAPSANG.NET&lt;/a&gt; on April 14, 2014.&lt;/p&gt;</content>
</entry>

</feed>
